<div class="chapter-header fade-in">
    <span class="chapter-badge">第 15 章</span>
    <h1 class="chapter-title">最小二乘法——无解时的最佳近似 <br><small style="font-size: 0.6em; color: var(--text-muted);">Least
            Squares: Best Approximation</small></h1>

    <div class="problem-hook"
        style="background: linear-gradient(135deg, rgba(74, 158, 255, 0.15), rgba(139, 92, 246, 0.15)); padding: 2rem; border-radius: 16px; margin-top: 1.5rem;">
        <div style="font-size: 2rem; margin-bottom: 0.5rem;">📈</div>
        <p style="font-size: 1.2rem; margin: 0; font-weight: bold;">
            "数据点不在一条线上，如何找最佳拟合线？"
        </p>
        <p style="margin: 1rem 0 0 0; color: var(--text-muted);">
            这正是<strong>最小二乘法</strong>解决的问题——机器学习的数学基础！
        </p>
    </div>

    <div class="vocab-summary" style="margin-top: 2rem;">
        <div class="vocab-title">本章核心词汇</div>
        <div class="vocab-list">
            <div class="vocab-item"><span class="vocab-zh">最小二乘</span><span class="vocab-en">Least Squares</span></div>
            <div class="vocab-item"><span class="vocab-zh">超定系统</span><span class="vocab-en">Overdetermined
                    System</span></div>
            <div class="vocab-item"><span class="vocab-zh">正规方程</span><span class="vocab-en">Normal Equation</span>
            </div>
        </div>
    </div>
</div>

<!-- ==================== SECTION 1 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">❓ 15.1 问题：方程比未知数多</h2>

    <div class="content-block">
        <div class="definition-card">
            <div class="definition-title">超定系统</div>
            <p>当方程数 > 未知数时，通常<strong>没有精确解</strong>。</p>
            <p>例如：3 个数据点，想用 $y = ax + b$（2 个未知数）拟合。</p>
        </div>

        <div class="aha-box" style="margin-top: 2rem;">
            <div class="aha-title">💡 几何理解</div>
            <p>
                $\vec{b}$ 不在 $A$ 的列空间中（够不着！）<br>
                最小二乘法：找列空间中<strong>离 $\vec{b}$ 最近的点</strong>
            </p>
        </div>
    </div>
</div>

<!-- ==================== SECTION 2 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">📐 15.2 正规方程</h2>

    <div class="content-block">
        <div class="theorem-card">
            <div class="theorem-title">最小二乘解</div>
            <p>最小化 $|A\vec{x} - \vec{b}|^2$ 的解是：</p>
            <div class="math-block">
                $\vec{x} = (A^T A)^{-1} A^T \vec{b}$
            </div>
        </div>

        <div class="example-ladder" style="margin-top: 2rem;">
            <div class="example-step">
                <div class="step-number">例</div>
                <div class="step-content">
                    <div class="step-label">线性回归</div>
                    <p>数据点：$(1, 2), (2, 3), (3, 5)$</p>
                    <p>想找 $y = ax + b$</p>
                    <p>写成矩阵形式：$\begin{bmatrix}1 & 1\\2 & 1\\3 & 1\end{bmatrix}\begin{bmatrix}a\\b\end{bmatrix} =
                        \begin{bmatrix}2\\3\\5\end{bmatrix}$</p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">✓</div>
                <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                    <div class="step-label" style="color: var(--accent-green);">结果</div>
                    <p>最佳拟合线：$y \approx 1.5x + 0.33$</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ==================== 实战应用 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🎯 实战应用</h2>

    <div class="content-block">
        <div class="deep-dive" style="border-left: 4px solid var(--accent-blue); margin-bottom: 2rem;">
            <div class="deep-title">📊 机器学习：线性回归</div>
            <div style="background: rgba(74, 158, 255, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p>这就是机器学习中<strong>线性回归</strong>的数学原理！</p>
            </div>
        </div>

        <div class="deep-dive" style="border-left: 4px solid var(--accent-orange); margin-bottom: 2rem;">
            <div class="deep-title">🏗️ 测量数据拟合</div>
            <div style="background: rgba(249, 115, 22, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p>工程测量数据总有误差，最小二乘法找最佳拟合。</p>
            </div>
        </div>

        <div class="deep-dive" style="border-left: 4px solid var(--accent-purple);">
            <div class="deep-title">🎮 动作捕捉</div>
            <div style="background: rgba(139, 92, 246, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p>动捕数据平滑和误差校正也用最小二乘法。</p>
            </div>
        </div>
    </div>
</div>

<!-- ==================== 总结 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🎯 本章收获</h2>

    <div class="content-block">
        <div class="theorem-card">
            <div class="theorem-title">核心要点</div>
            <ol style="margin: 0; padding-left: 1.5rem; line-height: 2.2;">
                <li><span class="term" data-en="Overdetermined">超定系统</span>：方程多于未知数，通常无精确解</li>
                <li><span class="term" data-en="Least Squares">最小二乘</span>：找"最接近"的解</li>
                <li><span class="term" data-en="Normal Equation">正规方程</span>：$\vec{x} = (A^T A)^{-1} A^T \vec{b}$</li>
                <li>应用：线性回归、数据拟合</li>
            </ol>
        </div>

        <div class="connection-box" style="margin-top: 2rem;">
            <div class="connection-title">📍 下一章预告</div>
            <p>
                接下来是线性代数的高峰：<br>
                <strong>特征值与特征向量</strong>——理解变换的"本质方向"！
            </p>
        </div>
    </div>
</div>