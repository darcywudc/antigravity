<div class="chapter-header fade-in">
    <span class="chapter-badge">第 2 章</span>
    <h1 class="chapter-title">用向量搭建世界 <br><small style="font-size: 0.6em; color: var(--text-muted);">Linear Combinations
            & Span</small></h1>
    <p class="chapter-description">
        如果给你两块乐高积木，你能搭出多少种不同的形状？
        这一章会告诉你：用两个向量做"原料"，你能到达空间的哪些地方！
    </p>
</div>

<!-- ==================== SECTION 1: 配方 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🧪 2.1 向量的"配方"</h2>

    <div class="content-block">
        <h3>🍹 奶茶店类比</h3>
        <p>
            想象你在奶茶店打工。店里有两种基础原料：
        </p>
        <ul>
            <li>☕ <strong>红茶</strong>（浓郁的味道）</li>
            <li>🥛 <strong>牛奶</strong>（奶香的味道）</li>
        </ul>
        <p>
            老板说："今天的特调是 <strong>3 份红茶 + 2 份牛奶</strong>。"
        </p>
        <p>
            这就是一个<strong>线性组合</strong>！你用两种原料，按照一定的比例，调出了一杯新饮品。
        </p>

        <div class="theorem-card">
            <div class="theorem-title">💡 线性组合</div>
            <p>
                把几个向量进行<strong>缩放</strong>（乘以系数），然后<strong>相加</strong>。
            </p>
            <div class="math-block">
                $$ a \cdot \vec{v} + b \cdot \vec{w} $$
            </div>
            <p style="font-size: 0.9em; color: var(--text-secondary);">
                这里的 a 和 b 就是"几份"的意思（配方比例）
            </p>
        </div>
    </div>
</div>

<!-- ==================== SECTION 2: 基向量 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🧱 2.2 空间的"乐高积木"</h2>

    <div class="content-block">
        <p>
            在 2D 平面上，有两块最基础的"积木"：
        </p>

        <div style="display: flex; gap: 3rem; justify-content: center; margin: 2rem 0; flex-wrap: wrap;">
            <div style="text-align: center;">
                <svg width="120" height="120" viewBox="0 0 120 120">
                    <line x1="20" y1="100" x2="100" y2="100" stroke="#f97316" stroke-width="4" />
                    <polygon points="100,100 90,95 90,105" fill="#f97316" />
                    <text x="60" y="90" fill="#f97316" font-size="14" font-weight="bold" text-anchor="middle">î</text>
                </svg>
                <p><strong>î</strong> = 向右 1 格</p>
                <p style="font-size: 0.9em; color: var(--text-muted);">$\begin{bmatrix} 1 \\ 0 \end{bmatrix}$</p>
            </div>

            <div style="text-align: center;">
                <svg width="120" height="120" viewBox="0 0 120 120">
                    <line x1="20" y1="100" x2="20" y2="20" stroke="#10b981" stroke-width="4" />
                    <polygon points="20,20 15,30 25,30" fill="#10b981" />
                    <text x="35" y="60" fill="#10b981" font-size="14" font-weight="bold">ĵ</text>
                </svg>
                <p><strong>ĵ</strong> = 向上 1 格</p>
                <p style="font-size: 0.9em; color: var(--text-muted);">$\begin{bmatrix} 0 \\ 1 \end{bmatrix}$</p>
            </div>
        </div>

        <div class="example-card">
            <p><strong>🎯 例子</strong></p>
            <p>
                坐标 (3, 2) 意思是什么？
            </p>
            <p style="text-align: center; font-size: 1.2rem;">
                向右走 <span style="color:#f97316">3 个 î</span>，向上走 <span style="color:#10b981">2 个 ĵ</span>
            </p>
            <div class="math-block">
                $$ \begin{bmatrix} 3 \\ 2 \end{bmatrix} = 3\hat{i} + 2\hat{j} $$
            </div>
        </div>
    </div>
</div>

<!-- ==================== SECTION 3: SPAN ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🌍 2.3 你能到达哪里？（Span）</h2>

    <div class="content-block">
        <h3>🎮 游戏关卡类比</h3>
        <p>
            想象你在一个游戏里，只能使用两种移动方式：
        </p>
        <ul>
            <li>按 A 键：向右跳</li>
            <li>按 B 键：向上跳</li>
        </ul>
        <p>
            只要能按任意次数的 A 和 B（包括负数次，即反向），你能到达屏幕上的<strong>每一个点</strong>！
        </p>
        <p>
            所有你能到达的地方，就叫做这两个向量的 <strong>Span（张成空间）</strong>。
        </p>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0;">
            <div class="definition-card" style="border-left-color: var(--accent-blue);">
                <div class="definition-title">😊 好情况</div>
                <p>
                    两个向量指向<strong>不同方向</strong>。
                    <br>
                    → Span = 整个 2D 平面！
                </p>
            </div>

            <div class="definition-card" style="border-left-color: var(--accent-red);">
                <div class="definition-title">😢 糟糕情况</div>
                <p>
                    两个向量指向<strong>同一条线</strong>。
                    <br>
                    → Span = 只是一条线！
                </p>
            </div>
        </div>
    </div>

    <!-- INTERACTIVE: Span -->
    <div class="viz-container">
        <div class="viz-header">
            <span class="viz-title">🕹️ 拖拽基向量，观察网格变化</span>
            <span class="viz-badge" style="background: var(--accent-purple);">核心概念</span>
        </div>
        <div class="viz-canvas-wrapper" style="height: 450px;">
            <canvas id="viz-basis-change" style="width: 100%; height: 100%;"></canvas>
        </div>
        <div class="viz-controls">
            <div
                style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                <div>
                    <p style="margin: 0;">
                        拖拽 <span style="color:#f97316">橙色 î</span> 和 <span style="color:#10b981">绿色 ĵ</span>！
                    </p>
                    <p style="font-size: 0.9em; color: var(--text-muted);">
                        注意黄色点 (2î + 1ĵ) 如何随着网格移动。
                    </p>
                </div>
                <button class="btn btn-secondary" id="reset-basis">重置</button>
            </div>
        </div>
    </div>
</div>

<!-- ==================== SECTION 4: 线性相关 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🔗 2.4 "多余的"向量</h2>

    <div class="content-block">
        <h3>🛒 购物车类比</h3>
        <p>
            如果你有：
        </p>
        <ul>
            <li>一张 100 元纸币</li>
            <li>两张 50 元纸币</li>
        </ul>
        <p>
            其中一个是"多余的"——你不需要三样都有，因为一张 100 块可以换成两张 50 块。
        </p>
        <p>
            在向量世界里，如果一个向量可以用其他向量表示出来，它就是<strong>线性相关</strong>的（多余的）。
        </p>

        <div class="theorem-card">
            <div class="theorem-title">🔑 判断方法</div>
            <ul style="margin: 0;">
                <li><strong>线性无关</strong>：每个向量都贡献新方向 ✅</li>
                <li><strong>线性相关</strong>：有向量是"多余的" ❌</li>
            </ul>
        </div>
    </div>

    <!-- INTERACTIVE: Span Check -->
    <div class="viz-container">
        <div class="viz-header">
            <span class="viz-title">🕹️ 让向量重合，观察维度坍缩</span>
            <span class="viz-badge" style="background: var(--accent-blue);">探索</span>
        </div>
        <div class="viz-canvas-wrapper" style="height: 400px;">
            <canvas id="viz-span-check" style="width: 100%; height: 100%;"></canvas>
        </div>
        <div class="viz-controls">
            <div style="text-align: center;">
                <p>状态：<span id="span-status" style="font-weight: bold; font-size: 1.2rem;">平面 (2D)</span></p>
                <p style="font-size: 0.9em; color: var(--text-muted);">
                    把两个向量拖到同一条线上，看看会发生什么！
                </p>
            </div>
        </div>
    </div>
</div>

<!-- ==================== SECTION 5: 总结 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🎯 本章收获</h2>

    <div class="content-block">
        <div class="theorem-card">
            <div class="theorem-title">今天你学会了</div>
            <ol style="margin: 0; padding-left: 1.5rem; line-height: 2.2;">
                <li><strong>线性组合</strong> = 缩放 + 相加（就像调饮料的配方）</li>
                <li><strong>基向量</strong> î 和 ĵ 是空间的"积木"</li>
                <li><strong>Span</strong> = 用这些积木能搭建出的所有位置</li>
                <li><strong>线性无关</strong> = 每个向量都有独特贡献</li>
            </ol>
        </div>

        <div
            style="text-align: center; margin-top: 2rem; padding: 2rem; background: linear-gradient(135deg, rgba(249, 115, 22, 0.1), rgba(236, 72, 153, 0.1)); border-radius: 12px;">
            <p style="font-size: 1.1rem; margin: 0;">
                💡 <strong>关键直觉</strong>
            </p>
            <p style="margin-top: 0.5rem;">
                坐标系只是一种"语言"。换一组基向量，就像换一种地图——世界还是那个世界，只是描述方式变了。
            </p>
        </div>
    </div>
</div>