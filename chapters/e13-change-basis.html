<div class="chapter-header fade-in">
    <span class="chapter-badge">第 13 章</span>
    <h1 class="chapter-title">基变换：翻译不同的语言 <br><small style="font-size: 0.6em; color: var(--text-muted);">Change of
            Basis</small></h1>
    <p class="chapter-description">
        同一个位置，用中文描述和用英文描述，坐标数字会不同——但地点还是那个地点！
        <strong>基变换</strong>就是在不同数学"语言"之间做翻译。
    </p>
</div>

<!-- 核心词汇 -->
<div class="section fade-in">
    <div class="vocab-summary">
        <div class="vocab-title">本章核心词汇</div>
        <div class="vocab-list">
            <div class="vocab-item"><span class="vocab-zh">基变换</span><span class="vocab-en">Change of Basis</span></div>
            <div class="vocab-item"><span class="vocab-zh">基变换矩阵</span><span class="vocab-en">Change of Basis
                    Matrix</span></div>
            <div class="vocab-item"><span class="vocab-zh">相似变换</span><span class="vocab-en">Similarity Transform</span>
            </div>
        </div>
    </div>
</div>

<!-- SECTION 1 -->
<div class="section fade-in">
    <h2 class="section-title">🗣️ 13.1 不同的视角，同一个世界</h2>

    <div class="content-block">
        <h3>🗺️ 类比：两个人描述同一个宝藏位置</h3>
        <p>想象两个探险家找到了宝藏：</p>
        <ul>
            <li><strong>你</strong>：从营地出发，向东 3 步，向北 2 步</li>
            <li><strong>朋友</strong>（面朝东北）：从营地出发，向前 4 步，向左 1 步</li>
        </ul>
        <p>
            说的是<strong>同一个点</strong>，但因为选择的"基准方向"不同，坐标数字完全不同！
        </p>

        <div class="theorem-card">
            <div class="theorem-title">💡 核心概念</div>
            <p>
                <span class="term" data-en="Basis">基</span>就是我们选择的"参考方向"。
                标准基是 î 和 ĵ，但我们可以选择任何两个不平行的向量作为新的基。
            </p>
        </div>
    </div>
</div>

<!-- SECTION 2 -->
<div class="section fade-in">
    <h2 class="section-title">🔄 13.2 基变换矩阵</h2>

    <div class="content-block">
        <p>如果我们知道新基向量在标准基下的坐标，就可以用矩阵来"翻译"！</p>

        <div class="example-ladder">
            <div class="example-step">
                <div class="step-number">P</div>
                <div class="step-content">
                    <div class="step-label">基变换矩阵 P</div>
                    <p>
                        矩阵的列是新基向量（用标准基表示）。<br>
                        $P$ 把"新语言"翻译成"标准语言"。
                    </p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">P⁻¹</div>
                <div class="step-content">
                    <div class="step-label">逆矩阵 P⁻¹</div>
                    <p>
                        $P^{-1}$ 做相反的事：把"标准语言"翻译成"新语言"。
                    </p>
                </div>
            </div>
        </div>

        <div class="deep-dive">
            <div class="deep-title">例子</div>
            <p>
                假设新基向量是 $\vec{b_1} = \begin{bmatrix}2\\1\end{bmatrix}$ 和 $\vec{b_2} = \begin{bmatrix}-1\\1\end{bmatrix}$
            </p>
            <p style="margin-top: 0.5rem;">
                基变换矩阵：$P = \begin{bmatrix}2 & -1\\1 & 1\end{bmatrix}$
            </p>
            <p style="margin-top: 0.5rem;">
                如果一个向量在新基下的坐标是 $(3, 2)$，那么它在标准基下的坐标是：<br>
                $P \begin{bmatrix}3\\2\end{bmatrix} = \begin{bmatrix}2 \times 3 + (-1) \times 2\\1 \times 3 + 1 \times
                2\end{bmatrix} = \begin{bmatrix}4\\5\end{bmatrix}$
            </p>
        </div>
    </div>
</div>

<!-- SECTION 3 -->
<div class="section fade-in">
    <h2 class="section-title">🔮 13.3 在不同语言里描述同一个变换</h2>

    <div class="content-block">
        <p>
            如果你和朋友用不同的基，同一个线性变换 A 在你们眼中的矩阵会不同！
        </p>

        <div class="theorem-card">
            <div class="theorem-title">🔑 相似变换公式</div>
            <p>设 A 是变换在标准基下的矩阵，B 是<strong>同一个变换</strong>在新基下的矩阵：</p>
            <div class="math-block">
                $$ B = P^{-1} A P $$
            </div>
            <p style="text-align: center; margin-top: 0.5rem;">
                A 和 B 叫做<span class="term" data-en="Similar Matrices">相似矩阵</span>
            </p>
        </div>

        <div class="aha-box">
            <div class="aha-title">直觉理解</div>
            <p>$P^{-1} A P$ 的意思是：</p>
            <ol>
                <li>$P$：先把"新语言"翻译成"标准语言"</li>
                <li>$A$：用标准语言执行变换</li>
                <li>$P^{-1}$：再把结果翻译回"新语言"</li>
            </ol>
        </div>
    </div>
</div>

<!-- SECTION 4 -->
<div class="section fade-in">
    <h2 class="section-title">🎯 13.4 为什么要换基？</h2>

    <div class="content-block">
        <p>
            有时候换一种"语言"，问题会变得<strong>更简单</strong>！
        </p>

        <div class="definition-card">
            <div class="definition-title">🎮 游戏类比</div>
            <p>
                如果游戏角色总是沿着一个斜坡移动，用"沿着斜坡/垂直斜坡"作为坐标轴，
                比用"水平/垂直"坐标轴更方便计算物理效果！
            </p>
        </div>

        <div class="connection-box">
            <div class="connection-title">与特征向量的联系</div>
            <p>
                下一章会讲到：如果我们选择<strong>特征向量</strong>作为新的基，
                变换矩阵会变成最简单的形式——对角矩阵！
            </p>
        </div>

        <!-- 新增：练习题 -->
        <div class="challenge-box" style="margin-top: 2rem;">
            <div class="challenge-title">✍️ 动手练习</div>
            <p><strong>标准基下的点 (2, 3)，在新基 $\vec{b_1}=(1,0), \vec{b_2}=(0,1)$ 下的坐标是多少？</strong></p>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看答案</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p><strong>答案</strong>：还是 (2, 3)！</p>
                    <p>因为新基就是标准基 ($\vec{b_1}=\hat{i}, \vec{b_2}=\hat{j}$)，所以坐标不需要"翻译"。</p>
                </div>
            </details>
        </div>

        <div class="challenge-box" style="margin-top: 1rem;">
            <p><strong>进阶：如果新基是 $\vec{b_1}=(2,0), \vec{b_2}=(0,3)$ 呢？</strong></p>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看答案</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p><strong>答案</strong>：(1, 1)</p>
                    <p>
                        因为 $1 \times (2,0) + 1 \times (0,3) = (2,3)$。<br>
                        基向量变长了，坐标数值就变小了（为了覆盖同样的距离）。
                    </p>
                </div>
            </details>
        </div>

        <!-- 新增：趣味知识 -->
        <div class="deep-dive" style="margin-top: 2rem; border-left: 4px solid var(--accent-purple);">
            <div class="deep-title">🖼️ 趣味应用：JPEG 图片压缩</div>
            <p>
                JPEG 压缩的核心（DCT 变换）本质上就是<strong>基变换</strong>！
            </p>
            <p style="margin-top: 0.5rem;">
                它把图片的像素块从"颜色基"转换到"频率基"。在这个新基下，
                很多高频系数接近 0，可以直接丢弃而不影响视觉效果，从而大大减小文件体积。
            </p>
        </div>
    </div>
</div>

<!-- ==================== 实战应用 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🎯 实战应用：用基变换解决真实问题</h2>

    <div class="content-block">
        <p style="font-size: 1.1rem; margin-bottom: 2rem;">
            基变换是在不同"语言"之间翻译坐标。选择正确的基可以把复杂问题变简单！
        </p>

        <!-- 问题 1：坐标转换 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-blue); margin-bottom: 2rem;">
            <div class="deep-title">🗺️ 问题 1：地图坐标转换</div>

            <div style="background: rgba(74, 158, 255, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>场景</strong>：一个游戏地图使用倾斜坐标系。新基向量是：</p>
                <p>$\vec{e_1} = (2, 1)$，$\vec{e_2} = (0, 1)$（标准坐标下）</p>
                <p>一个宝藏在新坐标系中的位置是 $(3, 2)$。</p>
                <p><strong>问题</strong>：宝藏在标准坐标系中的位置是什么？</p>
            </div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">构造基变换矩阵 P</div>
                        <div class="math-block">
                            $P = \begin{bmatrix}2 & 0\\1 & 1\end{bmatrix}$
                        </div>
                        <p>（列是新基向量在标准基下的坐标）</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-label">转换到标准坐标：$\vec{v}_{标准} = P \cdot \vec{v}_{新}$</div>
                        <div class="math-block">
                            $\begin{bmatrix}2 & 0\\1 & 1\end{bmatrix} \begin{bmatrix}3\\2\end{bmatrix} =
                            \begin{bmatrix}6\\5\end{bmatrix}$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>宝藏在标准坐标系中的位置是 <strong>$(6, 5)$</strong>。</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 问题 2：简化变换 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-orange); margin-bottom: 2rem;">
            <div class="deep-title">🎯 问题 2：在特征基下看变换</div>

            <div style="background: rgba(249, 115, 22, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>场景</strong>：变换矩阵 $A = \begin{bmatrix}2 & 1\\0 & 3\end{bmatrix}$ 有特征向量 $(1, 0)$ 和 $(1, 1)$。
                </p>
                <p><strong>问题</strong>：如果用这两个特征向量作为基，变换会变成什么样？</p>
            </div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">在特征基下，变换变成对角形式</div>
                        <div class="math-block">
                            $D = P^{-1}AP = \begin{bmatrix}2 & 0\\0 & 3\end{bmatrix}$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>在特征基下，变换变成了简单的<strong>缩放</strong>：第一个方向缩放 2 倍，第二个方向缩放 3 倍。没有任何"混合"！</p>
                    </div>
                </div>
            </div>

            <div class="aha-box" style="margin-top: 1rem;">
                <div class="aha-title">💡 这就是"对角化"的威力</div>
                <p>选择正确的基（特征向量），复杂的变换就变成了简单的沿轴缩放。计算 $A^{100}$ 变得轻而易举：$D^{100} = \begin{bmatrix}2^{100} & 0\\0 &
                    3^{100}\end{bmatrix}$！</p>
            </div>
        </div>

        <!-- 挑战题 -->
        <div class="challenge-box" style="margin-top: 2rem;">
            <div class="challenge-title">🚀 挑战：反向转换</div>
            <p><strong>问题</strong>：标准坐标 $(4, 3)$ 在新基 $\vec{e_1}=(1, 1)$, $\vec{e_2}=(-1, 1)$ 下的坐标是什么？</p>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看答案</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p>$P = \begin{bmatrix}1 & -1\\1 & 1\end{bmatrix}$，需要 $P^{-1}$</p>
                    <p>$\det(P) = 2$，$P^{-1} = \frac{1}{2}\begin{bmatrix}1 & 1\\-1 & 1\end{bmatrix}$</p>
                    <p>$P^{-1} \begin{bmatrix}4\\3\end{bmatrix} = \frac{1}{2}\begin{bmatrix}7\\-1\end{bmatrix} = (3.5,
                        -0.5)$</p>
                </div>
            </details>
        </div>

    </div>
</div>

<!-- 总结 -->
<div class="section fade-in">
    <h2 class="section-title">🎯 本章收获</h2>

    <div class="content-block">
        <div class="theorem-card">
            <div class="theorem-title">核心要点</div>
            <ol style="margin: 0; padding-left: 1.5rem; line-height: 2.2;">
                <li>同一个向量在不同基下有不同的坐标</li>
                <li><span class="term" data-en="Change of Basis Matrix">基变换矩阵</span> P 在不同坐标系之间翻译</li>
                <li>相似矩阵 $B = P^{-1}AP$ 描述同一个变换</li>
                <li>选择合适的基可以<strong>简化问题</strong></li>
            </ol>
        </div>
    </div>
</div>