<div class="chapter-header fade-in">
    <span class="chapter-badge">第 11 章</span>
    <h1 class="chapter-title">叉积与行列式的秘密联系 <br><small style="font-size: 0.6em; color: var(--text-muted);">Cross Products
            in the Light of Transformations</small></h1>
    <p class="chapter-description">
        上一章我们学了叉积怎么用。这一章揭示一个更深的秘密：
        叉积的公式到底是怎么来的？为什么偏偏是那样计算？
    </p>
</div>

<!-- 核心词汇 -->
<div class="section fade-in">
    <div class="vocab-summary">
        <div class="vocab-title">本章核心词汇</div>
        <div class="vocab-list">
            <div class="vocab-item"><span class="vocab-zh">平行六面体</span><span class="vocab-en">Parallelepiped</span>
            </div>
            <div class="vocab-item"><span class="vocab-zh">体积</span><span class="vocab-en">Volume</span></div>
            <div class="vocab-item"><span class="vocab-zh">三重积</span><span class="vocab-en">Triple Product</span></div>
        </div>
    </div>
</div>

<!-- SECTION 1 -->
<div class="section fade-in">
    <h2 class="section-title">🎁 11.1 叉积与体积</h2>

    <div class="content-block">
        <p>回想一下我们学过的：</p>
        <ul>
            <li>2D 中的<strong>行列式</strong> = 平行四边形面积</li>
            <li>3D 中的<strong>行列式</strong> = 平行六面体体积</li>
        </ul>

        <div class="theorem-card">
            <div class="theorem-title">🔮 惊人的联系</div>
            <p>如果你有三个 3D 向量 $\vec{x}$, $\vec{v}$, $\vec{w}$：</p>
            <div class="math-block">
                $$ \vec{x} \cdot (\vec{v} \times \vec{w}) = \text{由这三个向量围成的平行六面体的体积} $$
            </div>
            <p style="text-align: center;">
                这叫做<span class="term" data-en="Triple Product">三重积</span>！
            </p>
        </div>

        <div class="aha-box">
            <div class="aha-title">几何直觉</div>
            <p>
                $\vec{v} \times \vec{w}$ 的长度是平行四边形的面积（底面积），
                方向是垂直于这个面。
            </p>
            <p style="margin-top: 0.5rem;">
                点积 $\vec{x} \cdot (\vec{v} \times \vec{w})$ 测量 $\vec{x}$ 在垂直方向上的投影（高度）。
            </p>
            <p style="margin-top: 0.5rem; font-weight: bold;">
                底面积 × 高度 = 体积！这就是为什么三重积等于体积。
            </p>
        </div>

        <!-- 新增：具体计算例子 -->
        <h3 style="margin-top: 2rem;">🧮 实战演算：计算平行六面体体积</h3>

        <p>假设有三个向量围成一个"斜盒子"：</p>
        <div class="math-block">
            $$ \vec{a} = \begin{bmatrix}1\\0\\0\end{bmatrix}, \quad \vec{b} = \begin{bmatrix}0\\1\\0\end{bmatrix}, \quad
            \vec{c} = \begin{bmatrix}0\\0\\1\end{bmatrix} $$
        </div>

        <div class="example-ladder">
            <div class="example-step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-label">先算叉积 $\vec{b} \times \vec{c}$</div>
                    <p>
                        $\vec{b} \times \vec{c} = \begin{bmatrix}0\\1\\0\end{bmatrix} \times
                        \begin{bmatrix}0\\0\\1\end{bmatrix} = \begin{bmatrix}1\\0\\0\end{bmatrix}$
                    </p>
                    <p style="color: var(--text-muted); font-size: 0.9em;">这是 ĵ × k̂ = î（右手定则）</p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-label">再算点积 $\vec{a} \cdot (\vec{b} \times \vec{c})$</div>
                    <p>
                        $\begin{bmatrix}1\\0\\0\end{bmatrix} \cdot \begin{bmatrix}1\\0\\0\end{bmatrix} = 1 \times 1 + 0
                        \times 0 + 0 \times 0 = \mathbf{1}$
                    </p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">✓</div>
                <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                    <div class="step-label" style="color: var(--accent-green);">结论</div>
                    <p>
                        体积 = 1。这正是标准单位立方体的体积！
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SECTION 2 -->
<div class="section fade-in">
    <h2 class="section-title">🤔 11.2 为什么叉积必然垂直？</h2>

    <div class="content-block">
        <p>
            当 $\vec{x}$ 和 $\vec{v}$、$\vec{w}$ 在<strong>同一个平面</strong>内时，
            这三个向量无法围成一个"立体"——它们被压扁了！
        </p>
        <p>所以体积 = 0，这意味着：</p>

        <div class="math-block">
            $$ \vec{v} \cdot (\vec{v} \times \vec{w}) = 0 $$
            $$ \vec{w} \cdot (\vec{v} \times \vec{w}) = 0 $$
        </div>

        <div class="theorem-card">
            <div class="theorem-title">数学必然性</div>
            <p>
                点积为零 = 垂直！<br>
                所以 $\vec{v} \times \vec{w}$ <strong>必然</strong>垂直于 $\vec{v}$ 和 $\vec{w}$。
            </p>
            <p style="margin-top: 0.5rem; font-size: 0.95em; color: var(--text-secondary);">
                这不是人为规定的，而是从体积公式<strong>数学推导</strong>出来的！
            </p>
        </div>
    </div>
</div>

<!-- SECTION 3 -->
<div class="section fade-in">
    <h2 class="section-title">🧮 11.3 叉积公式的来源</h2>

    <div class="content-block">
        <div class="deep-dive">
            <div class="deep-title">用对偶性推导</div>
            <p>
                我们想找一个向量 $\vec{p}$，使得对于任意 $\vec{x}$：
            </p>
            <div class="math-block">
                $$ \vec{x} \cdot \vec{p} = \det([\vec{x}, \vec{v}, \vec{w}]) $$
            </div>
            <p style="margin-top: 0.5rem;">
                意思是：$\vec{x}$ 与 $\vec{p}$ 的点积等于三向量行列式（体积）。
            </p>
            <p style="margin-top: 0.5rem;">
                通过展开 3×3 行列式并整理，就能得出叉积的精确公式！
            </p>
        </div>

        <div class="connection-box">
            <div class="connection-title">概念之间的优美联系</div>
            <p>
                叉积 → 面积 → 行列式 → 体积 → 对偶性 → 线性变换<br>
                所有这些概念在深层是互相联系的！
            </p>
        </div>

        <!-- 新增：思考题 -->
        <div class="challenge-box" style="margin-top: 2rem;">
            <div class="challenge-title">🤔 想一想</div>
            <p><strong>如果三个向量围成的体积是 0，说明什么？</strong></p>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看答案</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p><strong>说明它们共面（线性相关）！</strong></p>
                    <p>
                        就像三个原本应该撑起一个盒子（3D）的棍子，倒在了同一个平面（2D）上。
                        这也是判断三个向量是否线性相关的好方法。
                    </p>
                </div>
            </details>
        </div>

        <!-- 新增：趣味知识 -->
        <div class="deep-dive" style="margin-top: 2rem; border-left: 4px solid var(--accent-purple);">
            <div class="deep-title">🌪️ 趣味应用：流体力学中的涡量</div>
            <p>
                在研究空气或水流时，科学家用叉积来计算流体的"涡量"（Vorticity）。
                也就是流体微团旋转的强度和方向。
            </p>
            <p style="margin-top: 0.5rem;">
                如果你在搅拌咖啡，咖啡表面的任何一点的旋转都可以用一个叉积向量来描述！
            </p>
        </div>
    </div>
</div>

<!-- ==================== 实战应用 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🎯 实战应用：用三重积解决真实问题</h2>

    <div class="content-block">
        <p style="font-size: 1.1rem; margin-bottom: 2rem;">
            三重积（混合积）是计算 3D 体积和判断向量共面性的利器。
        </p>

        <!-- 问题 1：计算平行六面体体积 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-blue); margin-bottom: 2rem;">
            <div class="deep-title">📦 问题 1：包装盒能装多少？</div>

            <div style="background: rgba(74, 158, 255, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>场景</strong>：一个倾斜的平行六面体盒子由三个边向量定义：</p>
                <p>$\vec{a} = (2, 0, 0)$，$\vec{b} = (1, 3, 0)$，$\vec{c} = (0, 1, 2)$</p>
                <p><strong>问题</strong>：盒子的体积是多少？</p>
            </div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">先算 $\vec{a} \times \vec{b}$</div>
                        <div class="math-block">
                            $\vec{a} \times \vec{b} = (2, 0, 0) \times (1, 3, 0) = (0, 0, 6)$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-label">再算 $(\vec{a} \times \vec{b}) \cdot \vec{c}$</div>
                        <div class="math-block">
                            $(0, 0, 6) \cdot (0, 1, 2) = 0 + 0 + 12 = 12$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>盒子的体积是 <strong>12 立方单位</strong>。</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 问题 2：判断共面 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-orange); margin-bottom: 2rem;">
            <div class="deep-title">📐 问题 2：这三个向量共面吗？</div>

            <div style="background: rgba(249, 115, 22, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>场景</strong>：判断三个向量是否在同一平面上：</p>
                <p>$\vec{a} = (1, 2, 3)$，$\vec{b} = (4, 5, 6)$，$\vec{c} = (7, 8, 9)$</p>
            </div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">计算三重积（3×3 行列式）</div>
                        <div class="math-block">
                            $\det \begin{bmatrix}1 & 2 & 3\\4 & 5 & 6\\7 & 8 & 9\end{bmatrix} = 1(45-48) - 2(36-42) +
                            3(32-35)$
                        </div>
                        <p>$= 1(-3) - 2(-6) + 3(-3) = -3 + 12 - 9 = 0$</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>三重积 = 0，说明这三个向量<strong>共面</strong>！它们围成的"盒子"被压扁了，没有体积。</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 问题 3：判断点在平面的哪一侧 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-purple);">
            <div class="deep-title">🎯 问题 3：点在平面的哪一侧？</div>

            <div style="background: rgba(139, 92, 246, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>场景</strong>：平面由点 A$(0,0,0)$ 和两个方向向量 $\vec{u} = (1,0,0)$、$\vec{v} = (0,1,0)$ 定义（即 xy 平面）。</p>
                <p>点 P 在 $(2, 3, 5)$。它在平面的上方还是下方？</p>
            </div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">计算 $\vec{AP} \cdot (\vec{u} \times \vec{v})$</div>
                        <p>$\vec{AP} = P - A = (2, 3, 5)$</p>
                        <p>$\vec{u} \times \vec{v} = (0, 0, 1)$（法线向上）</p>
                        <p>$\vec{AP} \cdot (0, 0, 1) = 5 > 0$</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>结果 > 0，说明点 P 在平面的<strong>上方</strong>（法线指向的那一侧）。</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 挑战题 -->
        <div class="challenge-box" style="margin-top: 2rem;">
            <div class="challenge-title">🚀 挑战：四面体体积</div>
            <p><strong>问题</strong>：四面体的三条边向量是 $(1,0,0)$、$(0,1,0)$、$(0,0,1)$。体积是多少？（提示：四面体体积 = 平行六面体体积 ÷ 6）</p>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看答案</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p>平行六面体体积 = $|(1,0,0) \cdot ((0,1,0) \times (0,0,1))| = |1| = 1$（单位立方体）</p>
                    <p>四面体体积 = $\frac{1}{6} \times 1 = \frac{1}{6}$ 立方单位</p>
                </div>
            </details>
        </div>

    </div>
</div>

<!-- 总结 -->
<div class="section fade-in">
    <h2 class="section-title">🎯 本章收获</h2>

    <div class="content-block">
        <div class="theorem-card">
            <div class="theorem-title">深层理解</div>
            <ol style="margin: 0; padding-left: 1.5rem; line-height: 2.2;">
                <li>叉积与 3D 行列式（体积）密切相关</li>
                <li><span class="term" data-en="Triple Product">三重积</span> $\vec{x} \cdot (\vec{v} \times \vec{w})$ = 体积
                </li>
                <li>叉积垂直于原向量是<strong>数学的必然结果</strong></li>
                <li>线性代数的不同概念在深层相互联系</li>
            </ol>
        </div>
    </div>
</div>