<div class="chapter-header fade-in">
    <span class="chapter-badge">第 6 章 | Chapter 6</span>
    <h1 class="chapter-title">正交性与投影 <br><small style="font-size: 0.6em; color: var(--text-muted);">Orthogonality and
            Projections</small></h1>
    <p class="chapter-description">
        在充满噪声的现实世界中，我们往往无法找到精确解。
        正交性不仅是几何上的"垂直"，更是我们寻找"最优近似解"的黄金准则。它是最小二乘法和机器学习回归算法的基石。
    </p>
</div>

<div class="section fade-in">
    <h2 class="section-title">6.1 完美的垂直 <small
            style="font-weight: normal; color: var(--text-muted); font-size: 0.8em;">Perpendicularity</small></h2>

    <div class="content-block">
        <p>
            我们如何判断两个向量是否垂直？在高中我们用量角器，在线性代数中我们用<strong>点积 (Dot Product)</strong>。
        </p>
        <div class="math-block">
            $$ \mathbf{u} \cdot \mathbf{v} = u_1v_1 + u_2v_2 + \dots + u_nv_n = 0 $$
        </div>
        <p>
            如果点积为零，这两个向量就是<strong>正交的 (Orthogonal)</strong>。
            正交向量之所以重要，是因为它们是"独立"的。向北走不会改变你的东西向位置。这种解耦特性使得计算变得极其简单。
        </p>
    </div>

    <div class="section-title">6.2 投影：寻找最近的影子 <small
            style="font-weight: normal; color: var(--text-muted); font-size: 0.8em;">Projections</small></div>
    <div class="content-block">
        <p>
            假设你有一个向量 $\mathbf{b}$，你想在一条直线（由向量 $\mathbf{a}$ 生成）上找到一个离 $\mathbf{b}$ 最近的点 $\mathbf{p}$。
            这个点 $\mathbf{p}$ 就是 $\mathbf{b}$ 在 $\mathbf{a}$ 上的<strong>投影 (Projection)</strong>。
        </p>
        <p>
            直觉告诉我们，连接 $\mathbf{b}$ 和 $\mathbf{p}$ 的误差向量 $\mathbf{e} = \mathbf{b} - \mathbf{p}$
            必须与直线<strong>垂直</strong>。如果它不垂直（斜着），我们就可以在直线上移动一点点，让距离更近。
        </p>
        <p>
            这个简短的几何直觉——<strong>误差垂直于子空间 (Error is orthogonal to subspace)</strong>——是整个最小二乘法理论的核心。
        </p>
    </div>

    <div class="viz-container">
        <div class="viz-header">
            <span class="viz-title">交互演示：正交投影</span>
            <span class="viz-badge">Interactive</span>
        </div>
        <div class="viz-canvas-wrapper" style="height: 400px;">
            <canvas id="viz-ortho" style="width: 100%; height: 100%;"></canvas>
        </div>
        <div class="viz-controls">
            <p class="control-label">
                拖拽 <span style="color: #4a9eff;">向量 b</span>。观察 <span style="color: #10b981;">投影向量 p</span> 和 <span
                    style="color: #fca5a5; border-bottom: 1px dashed #fca5a5;">误差向量 e</span>。
            </p>
            <div class="math-block" id="ortho-calc" style="font-size: 0.9rem;">
                $$ \mathbf{a} \cdot \mathbf{e} = 0 $$
            </div>
            <p style="font-size: 0.9rem; color: #a0a0b0;">
                无论你怎么移动 $\mathbf{b}$，误差向量 $\mathbf{e}$ 始终与基准向量 $\mathbf{a}$ 保持垂直（正交）。
            </p>
        </div>
    </div>
</div>

<div class="section fade-in">
    <h2 class="section-title">6.3 最小二乘法 <small
            style="font-weight: normal; color: var(--text-muted); font-size: 0.8em;">Least Squares</small></h2>

    <div class="content-block">
        <p>
            在实际工程中，我们经常遇到 $A\mathbf{x} = \mathbf{b}$ 无解的情况（例如数据点太多，无法用一条直线穿过所有点）。
            此时，我们放弃寻找精确解 $\mathbf{x}$，转而寻找一个 $\hat{\mathbf{x}}$，使得 $A\hat{\mathbf{x}}$ 尽可能接近 $\mathbf{b}$。
        </p>
        <p>
            "尽可能接近"意味着误差向量 $\mathbf{e} = \mathbf{b} - A\hat{\mathbf{x}}$ 的长度最小。
            根据上面的投影原理，这等价于要求误差向量垂直于 $A$ 的列空间。这导出了著名的<strong>正规方程 (Normal Equation)</strong>：
        </p>
        <div class="math-block">
            $$ A^TA\hat{\mathbf{x}} = A^T\mathbf{b} $$
        </div>
    </div>

    <div class="section-title">6.4 常用词汇表 <small
            style="font-weight: normal; color: var(--text-muted); font-size: 0.8em;">Vocabulary</small></div>
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div class="definition-card" style="margin:0">
            <strong style="color: var(--accent-blue)">中文术语</strong>
            <ul style="list-style: none; padding: 0; margin-top: 0.5rem; color: var(--text-secondary);">
                <li>正交 (垂直)</li>
                <li>点积 (内积)</li>
                <li>投影</li>
                <li>最小二乘法</li>
                <li>标准正交基</li>
            </ul>
        </div>
        <div class="definition-card" style="margin:0">
            <strong style="color: var(--accent-purple)">English Terms</strong>
            <ul style="list-style: none; padding: 0; margin-top: 0.5rem; color: var(--text-secondary);">
                <li>Orthogonal</li>
                <li>Dot Product (Inner Product)</li>
                <li>Projection</li>
                <li>Least Squares</li>
                <li>Orthonormal Basis</li>
            </ul>
        </div>
    </div>
</div>