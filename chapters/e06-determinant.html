<div class="chapter-header fade-in">
    <span class="chapter-badge">Chapter 6</span>
    <h1 class="chapter-title">行列式 <br><small style="font-size: 0.6em; color: var(--text-muted);">The Determinant</small>
    </h1>
    <p class="chapter-description">
        行列式是线性代数中最神秘的概念之一。它是一个<strong>单一的数字</strong>，却能告诉你关于矩阵的惊人信息：
        变换是否可逆？空间被拉伸了多少？方向是否被翻转？
        这一切都藏在一个简单的符号 $\det(A)$ 里。
    </p>
</div>

<!-- ==================== SECTION 1: GEOMETRIC MEANING ==================== -->
<div class="section fade-in">
    <h2 class="section-title">6.1 几何意义：面积/体积的缩放因子</h2>

    <div class="content-block">
        <h3>6.1.1 核心直觉</h3>
        <p>
            想象一个<strong>单位正方形</strong>（边长为 1，面积为 1）。当我们对它施加一个线性变换后，
            它会变成一个平行四边形。这个平行四边形的面积与原来的比值，就是行列式的绝对值。
        </p>

        <div class="theorem-card">
            <div class="theorem-title">行列式的几何定义</div>
            <p>
                $|\det(A)|$ = 变换后的面积 / 变换前的面积
            </p>
            <p style="font-size: 0.9em; color: var(--text-secondary);">
                在 3D 中，这变成体积的缩放因子。
            </p>
        </div>
    </div>

    <div class="content-block">
        <h3>6.1.2 图解：单位正方形的变换</h3>

        <div
            style="display: flex; gap: 3rem; justify-content: center; align-items: center; margin: 2rem 0; flex-wrap: wrap;">
            <!-- Before -->
            <div style="text-align: center;">
                <svg width="140" height="140" viewBox="0 0 140 140">
                    <rect x="20" y="60" width="60" height="60" fill="rgba(74, 158, 255, 0.3)" stroke="#4a9eff"
                        stroke-width="2" />
                    <line x1="20" y1="120" x2="80" y2="120" stroke="#f97316" stroke-width="2" />
                    <line x1="20" y1="120" x2="20" y2="60" stroke="#10b981" stroke-width="2" />
                    <text x="50" y="95" fill="#4a9eff" font-size="14" text-anchor="middle">1</text>
                    <circle cx="20" cy="120" r="3" fill="#fff" />
                </svg>
                <p>原始单位正方形<br>面积 = 1</p>
            </div>

            <!-- Arrow -->
            <div style="text-align: center;">
                <div style="font-size: 2rem;">→</div>
                <p style="font-size: 0.85em;">变换 $A$</p>
            </div>

            <!-- After -->
            <div style="text-align: center;">
                <svg width="160" height="140" viewBox="0 0 160 140">
                    <!-- Parallelogram -->
                    <polygon points="20,120 100,120 130,40 50,40" fill="rgba(236, 72, 153, 0.3)" stroke="#ec4899"
                        stroke-width="2" />
                    <line x1="20" y1="120" x2="100" y2="120" stroke="#f97316" stroke-width="2" />
                    <line x1="20" y1="120" x2="50" y2="40" stroke="#10b981" stroke-width="2" />
                    <text x="75" y="85" fill="#ec4899" font-size="14" text-anchor="middle">det(A)</text>
                    <circle cx="20" cy="120" r="3" fill="#fff" />
                </svg>
                <p>变换后的平行四边形<br>面积 = $|\det(A)|$</p>
            </div>
        </div>
    </div>
</div>

<!-- ==================== SECTION 2: SIGN ==================== -->
<div class="section fade-in">
    <h2 class="section-title">6.2 符号的意义：方向翻转</h2>

    <div class="content-block">
        <p>
            行列式不仅有大小，还有<strong>正负号</strong>。
        </p>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0;">
            <div class="definition-card" style="border-left-color: var(--accent-green);">
                <div class="definition-title" style="color: var(--accent-green);">$\det(A) > 0$：保持方向</div>
                <p>变换保持了空间的"手性"（右手坐标系仍然是右手）。</p>
                <svg width="100" height="80" viewBox="0 0 100 80" style="display: block; margin: 0.5rem auto;">
                    <line x1="10" y1="70" x2="50" y2="70" stroke="#f97316" stroke-width="2" />
                    <line x1="10" y1="70" x2="10" y2="30" stroke="#10b981" stroke-width="2" />
                    <text x="55" y="75" fill="#f97316" font-size="10">î</text>
                    <text x="15" y="25" fill="#10b981" font-size="10">ĵ</text>
                </svg>
            </div>

            <div class="definition-card" style="border-left-color: var(--accent-red);">
                <div class="definition-title" style="color: var(--accent-red);">$\det(A) < 0$：翻转方向</div>
                        <p>变换翻转了空间（右手变左手），例如镜像反射。</p>
                        <svg width="100" height="80" viewBox="0 0 100 80" style="display: block; margin: 0.5rem auto;">
                            <line x1="90" y1="70" x2="50" y2="70" stroke="#f97316" stroke-width="2" />
                            <line x1="90" y1="70" x2="90" y2="30" stroke="#10b981" stroke-width="2" />
                            <text x="45" y="75" fill="#f97316" font-size="10">î'</text>
                            <text x="75" y="25" fill="#10b981" font-size="10">ĵ</text>
                            <text x="50" y="50" fill="#ef4444" font-size="12">翻转!</text>
                        </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== SECTION 3: ZERO DETERMINANT ==================== -->
    <div class="section fade-in">
        <h2 class="section-title">6.3 行列式为零：维度坍缩</h2>

        <div class="content-block">
            <p>
                当 $\det(A) = 0$ 时，意味着变换后的"面积"变成了 0。
                几何上，这意味着<strong>空间被压扁</strong>成了更低的维度。
            </p>

            <div class="theorem-card">
                <div class="theorem-title">$\det(A) = 0$ 的含义</div>
                <ul style="margin: 0;">
                    <li>2D 中：平行四边形被压成一条线（或点）</li>
                    <li>3D 中：立方体被压成一个平面（或线/点）</li>
                    <li>矩阵是<strong>奇异的</strong>（singular），不可逆</li>
                    <li>矩阵的列向量<strong>线性相关</strong></li>
                </ul>
            </div>

            <!-- Visual -->
            <div style="display: flex; gap: 2rem; justify-content: center; margin: 2rem 0;">
                <svg width="200" height="120" viewBox="0 0 200 120">
                    <rect x="10" y="30" width="60" height="60" fill="rgba(74, 158, 255, 0.3)" stroke="#4a9eff" />
                    <text x="40" y="65" fill="#4a9eff" font-size="12" text-anchor="middle">面积=1</text>

                    <text x="95" y="65" fill="#666" font-size="20">→</text>

                    <line x1="120" y1="30" x2="180" y2="90" stroke="#ef4444" stroke-width="4" />
                    <text x="150" y="75" fill="#ef4444" font-size="12" text-anchor="middle">面积=0</text>
                </svg>
            </div>
        </div>
    </div>

    <!-- ==================== SECTION 4: FORMULA ==================== -->
    <div class="section fade-in">
        <h2 class="section-title">6.4 计算公式</h2>

        <div class="content-block">
            <h3>6.4.1 2×2 矩阵</h3>
            <div class="math-block">
                $$
                \det\begin{bmatrix} a & b \\ c & d \end{bmatrix} = ad - bc
                $$
            </div>
            <p>
                这个公式就是平行四边形面积的计算！$ad$ 是一个对角线乘积，$bc$ 是另一个。
            </p>

            <div class="example-card">
                <p><strong>例子：</strong></p>
                <div class="math-block">
                    $$
                    \det\begin{bmatrix} 3 & 1 \\ 0 & 2 \end{bmatrix} = 3 \cdot 2 - 1 \cdot 0 = 6
                    $$
                </div>
                <p>这个变换将面积放大 6 倍，且不翻转方向。</p>
            </div>
        </div>

        <div class="content-block">
            <h3>6.4.2 3×3 矩阵</h3>
            <div class="math-block">
                $$
                \det\begin{bmatrix} a & b & c \\ d & e & f \\ g & h & i \end{bmatrix}
                = a(ei - fh) - b(di - fg) + c(dh - eg)
                $$
            </div>
            <p style="font-size: 0.9em; color: var(--text-secondary);">
                这叫做"按第一行展开"。每个元素乘以它的"余子式"（删除该行列后的 2×2 行列式），并交替加减。
            </p>
        </div>
    </div>

    <!-- ==================== SECTION 5: PROPERTIES ==================== -->
    <div class="section fade-in">
        <h2 class="section-title">6.5 重要性质</h2>

        <div class="content-block">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                <div class="definition-card">
                    <div class="definition-title">1. 乘法规则</div>
                    <p>$\det(AB) = \det(A) \cdot \det(B)$</p>
                    <p style="font-size: 0.85em; color: var(--text-secondary);">
                        两个变换连续作用，面积缩放因子相乘。
                    </p>
                </div>

                <div class="definition-card">
                    <div class="definition-title">2. 转置</div>
                    <p>$\det(A^T) = \det(A)$</p>
                    <p style="font-size: 0.85em; color: var(--text-secondary);">
                        转置不改变行列式——行和列"地位相同"。
                    </p>
                </div>

                <div class="definition-card">
                    <div class="definition-title">3. 逆矩阵</div>
                    <p>$\det(A^{-1}) = \frac{1}{\det(A)}$</p>
                    <p style="font-size: 0.85em; color: var(--text-secondary);">
                        逆变换的缩放因子是原来的倒数。
                    </p>
                </div>

                <div class="definition-card">
                    <div class="definition-title">4. 单位矩阵</div>
                    <p>$\det(I) = 1$</p>
                    <p style="font-size: 0.85em; color: var(--text-secondary);">
                        恒等变换不改变面积/体积。
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== SECTION 6: APPLICATIONS ==================== -->
    <div class="section fade-in">
        <h2 class="section-title">6.6 应用</h2>

        <div class="content-block">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem;">
                <div class="definition-card">
                    <div class="definition-title">🔍 判断可逆性</div>
                    <p>
                        $\det(A) \neq 0$ ⟺ $A$ 可逆。
                        这是判断线性方程组是否有唯一解的关键。
                    </p>
                </div>

                <div class="definition-card">
                    <div class="definition-title">📐 计算面积/体积</div>
                    <p>
                        由三个向量围成的平行六面体的体积 = $|\det([v_1, v_2, v_3])|$
                    </p>
                </div>

                <div class="definition-card">
                    <div class="definition-title">🔄 坐标变换</div>
                    <p>
                        积分换元时，雅可比行列式描述了坐标变换对"面积元素"的影响。
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== SECTION 7: SUMMARY ==================== -->
    <div class="section fade-in">
        <h2 class="section-title">本章总结</h2>

        <div class="content-block">
            <div class="theorem-card">
                <div class="theorem-title">核心要点</div>
                <ol style="margin: 0; padding-left: 1.5rem; line-height: 2;">
                    <li><strong>$|\det(A)|$</strong> = 面积/体积的缩放因子。</li>
                    <li><strong>$\det(A) > 0$</strong>：保持方向；<strong>$\det(A) < 0$</strong>：翻转方向。</li>
                    <li><strong>$\det(A) = 0$</strong>：维度坍缩 → 矩阵奇异、不可逆。</li>
                    <li>2×2 公式：$ad - bc$；3×3 用余子式展开。</li>
                </ol>
            </div>

            <p style="margin-top: 2rem;">
                下一章，我们将讨论如何"撤销"一个变换——这就是<strong>逆矩阵</strong>。
            </p>
        </div>
    </div>