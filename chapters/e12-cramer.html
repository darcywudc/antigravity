<div class="chapter-header fade-in">
    <span class="chapter-badge">第 12 章</span>
    <h1 class="chapter-title">克莱默法则：用面积解方程 <br><small style="font-size: 0.6em; color: var(--text-muted);">Cramer's
            Rule</small></h1>
    <p class="chapter-description">
        有一个古老而优美的公式，可以用行列式（面积/体积）直接算出方程的解！
        虽然计算量不小，但其中的几何思想非常深刻。
    </p>
</div>

<!-- 核心词汇 -->
<div class="section fade-in">
    <div class="vocab-summary">
        <div class="vocab-title">本章核心词汇</div>
        <div class="vocab-list">
            <div class="vocab-item"><span class="vocab-zh">克莱默法则</span><span class="vocab-en">Cramer's Rule</span></div>
            <div class="vocab-item"><span class="vocab-zh">面积比</span><span class="vocab-en">Area Ratio</span></div>
        </div>
    </div>
</div>

<!-- SECTION 1 -->
<div class="section fade-in">
    <h2 class="section-title">🧩 12.1 问题设置</h2>

    <div class="content-block">
        <p>假设我们要解这个线性方程组：</p>
        <div class="math-block">
            $$ A \vec{x} = \vec{b} $$
        </div>
        <p>
            已知矩阵 A 和结果向量 $\vec{b}$，求未知向量 $\vec{x}$。
        </p>
        <p style="margin-top: 1rem;">
            我们知道可以用逆矩阵：$\vec{x} = A^{-1}\vec{b}$。<br>
            但克莱默发现了另一种更"几何化"的方法！
        </p>
    </div>
</div>

<!-- SECTION 2 -->
<div class="section fade-in">
    <h2 class="section-title">📐 12.2 面积比的洞察</h2>

    <div class="content-block">
        <div class="aha-box">
            <div class="aha-title">核心思想</div>
            <p>
                想象一个单位正方形（由 î 和 ĵ 围成）。经过变换 A 后，它变成了一个平行四边形。
            </p>
            <p style="margin-top: 0.5rem;">
                如果我们知道某个小区域在变换后对应到结果向量 $\vec{b}$ 的特定位置，
                我们就能通过<strong>面积比</strong>推算出原始坐标！
            </p>
        </div>

        <div class="theorem-card">
            <div class="theorem-title">🔑 克莱默法则（2×2）</div>
            <p>对于方程 $A\vec{x} = \vec{b}$，其中 $\vec{x} = \begin{bmatrix} x \\ y \end{bmatrix}$：</p>
            <div class="math-block">
                $$ x = \frac{\det(A_x)}{\det(A)}, \quad y = \frac{\det(A_y)}{\det(A)} $$
            </div>
            <p style="margin-top: 0.5rem;">
                其中 $A_x$ = 把 A 的第 1 列替换成 $\vec{b}$<br>
                $A_y$ = 把 A 的第 2 列替换成 $\vec{b}$
            </p>
        </div>
    </div>
</div>

<!-- SECTION 3 -->
<div class="section fade-in">
    <h2 class="section-title">🧮 12.3 完整计算例子</h2>

    <div class="content-block">
        <div class="deep-dive">
            <div class="deep-title">例题</div>
            <p>解方程：</p>
            <div class="math-block">
                $$ \begin{bmatrix} 2 & 1 \\ 1 & 3 \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix} = \begin{bmatrix} 5
                \\ 5 \end{bmatrix} $$
            </div>

            <div class="example-ladder" style="margin-top: 1.5rem;">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">计算 det(A)</div>
                        <p>$\det(A) = 2 \times 3 - 1 \times 1 = 6 - 1 = 5$</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-label">计算 x</div>
                        <p>$A_x = \begin{bmatrix} 5 & 1 \\ 5 & 3 \end{bmatrix}$，$\det(A_x) = 15 - 5 = 10$</p>
                        <p style="color: var(--accent-green);">$x = \frac{10}{5} = 2$</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-label">计算 y</div>
                        <p>$A_y = \begin{bmatrix} 2 & 5 \\ 1 & 5 \end{bmatrix}$，$\det(A_y) = 10 - 5 = 5$</p>
                        <p style="color: var(--accent-green);">$y = \frac{5}{5} = 1$</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>$\vec{x} = \begin{bmatrix} 2 \\ 1 \end{bmatrix}$</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- SECTION 4 -->
<div class="section fade-in">
    <h2 class="section-title">⚖️ 12.4 克莱默法则的局限</h2>

    <div class="content-block">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
            <div class="definition-card" style="border-left-color: var(--accent-green);">
                <div class="definition-title">✅ 优点</div>
                <ul style="margin: 0; font-size: 0.95em;">
                    <li>公式优美，几何意义明确</li>
                    <li>每个变量可以独立求解</li>
                    <li>适合理论分析</li>
                </ul>
            </div>
            <div class="definition-card" style="border-left-color: var(--accent-red);">
                <div class="definition-title">⚠️ 缺点</div>
                <ul style="margin: 0; font-size: 0.95em;">
                    <li>计算量大（要算很多行列式）</li>
                    <li>n 很大时效率很低</li>
                    <li>实际中用高斯消元更快</li>
                </ul>
            </div>
        </div>

        <!-- 新增：练习题 -->
        <div class="challenge-box" style="margin-top: 2rem;">
            <div class="challenge-title">✍️ 动手练习</div>
            <p><strong>用克莱默法则解下列方程组：</strong></p>
            <div class="math-block">
                $$ \begin{cases} x + y = 3 \\ x - y = 1 \end{cases} $$
            </div>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看答案</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p>矩阵 $A = \begin{bmatrix} 1 & 1 \\ 1 & -1 \end{bmatrix}$，$\vec{b} = \begin{bmatrix} 3 \\ 1
                        \end{bmatrix}$</p>
                    <ol>
                        <li>$\det(A) = 1(-1) - 1(1) = -2$</li>
                        <li>$\det(A_x) = \det\begin{bmatrix} 3 & 1 \\ 1 & -1 \end{bmatrix} = -3 - 1 = -4 \Rightarrow x =
                            -4/-2 = \mathbf{2}$</li>
                        <li>$\det(A_y) = \det\begin{bmatrix} 1 & 3 \\ 1 & 1 \end{bmatrix} = 1 - 3 = -2 \Rightarrow y =
                            -2/-2 = \mathbf{1}$</li>
                    </ol>
                    <p style="color: var(--accent-green); font-weight: bold;">验证：2+1=3, 2-1=1 ✅</p>
                </div>
            </details>
        </div>

        <!-- 新增：常见误区 -->
        <div class="definition-card" style="border-left-color: var(--accent-orange); margin-top: 2rem;">
            <div class="definition-title" style="color: var(--accent-orange);">⚠️ 常见误区</div>
            <p><strong>误区</strong>："写程序解方程总是用克莱默法则"</p>
            <p><strong>纠正</strong>：虽然公式漂亮，但实际编程（特别是大矩阵）时，<strong>高斯消元法</strong>快得多！</p>
            <p style="margin-top: 0.5rem;">
                比如解 100个变量的方程组，克莱默法则可能要算几亿年，而高斯消元只要几毫秒。
            </p>
        </div>
    </div>
</div>

<!-- ==================== 实战应用 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🎯 实战应用：用克莱默法则解决真实问题</h2>

    <div class="content-block">
        <p style="font-size: 1.1rem; margin-bottom: 2rem;">
            克莱默法则虽然计算量大，但它揭示了方程解的几何本质——面积比！
        </p>

        <!-- 问题 1：电路分析 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-blue); margin-bottom: 2rem;">
            <div class="deep-title">⚡ 问题 1：简单电路求电流</div>

            <div style="background: rgba(74, 158, 255, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>场景</strong>：根据基尔霍夫定律，一个简单电路满足：</p>
                <div class="math-block">
                    $\begin{cases} 2I_1 + I_2 = 10 \\ I_1 + 3I_2 = 15 \end{cases}$
                </div>
                <p><strong>问题</strong>：求电流 $I_1$ 和 $I_2$。</p>
            </div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">计算系数矩阵行列式</div>
                        <div class="math-block">
                            $\det(A) = \det\begin{bmatrix}2 & 1\\1 & 3\end{bmatrix} = 6 - 1 = 5$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-label">替换第一列求 $I_1$</div>
                        <div class="math-block">
                            $\det(A_{I_1}) = \det\begin{bmatrix}10 & 1\\15 & 3\end{bmatrix} = 30 - 15 = 15$
                        </div>
                        <p>$I_1 = \frac{15}{5} = 3$ 安培</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-label">替换第二列求 $I_2$</div>
                        <div class="math-block">
                            $\det(A_{I_2}) = \det\begin{bmatrix}2 & 10\\1 & 15\end{bmatrix} = 30 - 10 = 20$
                        </div>
                        <p>$I_2 = \frac{20}{5} = 4$ 安培</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>$I_1 = 3$ A，$I_2 = 4$ A</p>
                        <p style="font-size: 0.9em; color: var(--text-muted);">验证：$2(3) + 4 = 10$ ✓，$3 + 3(4) = 15$ ✓
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 问题 2：几何解释 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-orange); margin-bottom: 2rem;">
            <div class="deep-title">📐 问题 2：面积比的直觉</div>

            <div style="background: rgba(249, 115, 22, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>场景</strong>：方程 $x\vec{v_1} + y\vec{v_2} = \vec{b}$，其中 $\vec{v_1} = (1, 0)$，$\vec{v_2} = (0,
                    1)$，$\vec{b} = (3, 2)$。</p>
                <p><strong>问题</strong>：用几何方法理解为什么 $x = 3$。</p>
            </div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">原始平行四边形面积</div>
                        <p>由 $\vec{v_1}$ 和 $\vec{v_2}$ 围成的面积 = $\det(A) = 1$（单位正方形）</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-label">"变形"后的面积</div>
                        <p>用 $\vec{b}$ 替换 $\vec{v_1}$ 后，新面积 = $\det(A_x) = 3$</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>$x = \frac{\text{新面积}}{\text{原面积}} = \frac{3}{1} = 3$</p>
                        <p>克莱默法则本质上是在问："为了从原基变换到目标向量，需要在 x 方向伸缩多少倍？"</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 挑战题 -->
        <div class="challenge-box" style="margin-top: 2rem;">
            <div class="challenge-title">🚀 挑战：无解情况</div>
            <p><strong>问题</strong>：方程组 $\begin{cases} x + 2y = 3 \\ 2x + 4y = 7 \end{cases}$ 用克莱默法则会发生什么？</p>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看答案</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p>$\det(A) = 1 \times 4 - 2 \times 2 = 0$</p>
                    <p>行列式为 0，克莱默法则<strong>失效</strong>！</p>
                    <p>几何上：两条直线平行（一个 3，一个 3.5），没有交点，<strong>无解</strong>。</p>
                </div>
            </details>
        </div>

    </div>
</div>

<!-- 总结 -->
<div class="section fade-in">
    <h2 class="section-title">🎯 本章收获</h2>

    <div class="content-block">
        <div class="theorem-card">
            <div class="theorem-title">核心要点</div>
            <ol style="margin: 0; padding-left: 1.5rem; line-height: 2.2;">
                <li><span class="term" data-en="Cramer's Rule">克莱默法则</span>用行列式（面积比）解方程</li>
                <li>替换对应的列，计算新行列式，除以原行列式</li>
                <li>概念优美，但计算量比高斯消元大</li>
                <li>行列式 = 0 时无解或无穷解</li>
            </ol>
        </div>
    </div>
</div>