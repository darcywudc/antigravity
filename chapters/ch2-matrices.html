<div class="chapter-header fade-in">
    <span class="chapter-badge">第 2 章 | Chapter 2</span>
    <h1 class="chapter-title">矩阵与线性变换 <br><small style="font-size: 0.6em; color: var(--text-muted);">Matrices and Linear
            Transformations</small></h1>
    <p class="chapter-description">
        矩阵不仅仅是排成方阵的数字。在动态的几何视角下，矩阵是空间的变换器。本章将带你领略"线性变换"的本质，这是理解整个线性代数的关键钥匙。
    </p>
</div>

<div class="section fade-in">
    <h2 class="section-title">2.1 矩阵是特殊的"函数" <small
            style="font-weight: normal; color: var(--text-muted); font-size: 0.8em;">Matrices as Functions</small></h2>

    <div class="content-block">
        <p>
            在微积分中，我们习惯于处理输入一个数并输出一个数的函数，如 $f(x) = x^2$。
            在线性代数中，我们的函数接收一个<strong>向量</strong>作为输入，并输出一个新的<strong>向量</strong>。
        </p>
        <p>
            我们通常把这种向量到向量的映射称为<strong>变换 (Transformation)</strong>。
            如果这个变换满足以下两个"线性"性质，我们就称之为<strong>线性变换 (Linear Transformation)</strong>：
        </p>
        <ol>
            <li><strong>直线保持直线</strong>：变换后的网格线仍然是直线，不能弯曲。</li>
            <li><strong>原点保持固定</strong>：零向量变换后仍然是零向量。</li>
        </ol>
        <p>
            令人惊奇的是，任何一个这样的线性变换，都可以完全由一个<strong>矩阵</strong>来描述。
        </p>

        <div class="theorem-card">
            <div class="theorem-title">核心洞察 (Key Insight)</div>
            <p>
                如果你想知道一个线性变换矩阵 $A$ 长什么样，你只需要观察它把<strong>基向量 (Basis Vectors)</strong> $\mathbf{i}$ 和 $\mathbf{j}$ 变换到了哪里。
            </p>
            <div class="math-block">
                $$ A = \begin{bmatrix} | & | \\ T(\mathbf{i}) & T(\mathbf{j}) \\ | & | \end{bmatrix} $$
            </div>
            <p>即：矩阵的第一列是 $\mathbf{i}$ 变换后的坐标，第二列是 $\mathbf{j}$ 变换后的坐标。</p>
        </div>
    </div>

    <div class="viz-container">
        <div class="viz-header">
            <span class="viz-title">交互演示：线性变换可视化</span>
            <span class="viz-badge">Interactive</span>
        </div>
        <div class="viz-canvas-wrapper" style="height: 500px;">
            <canvas id="viz-transform" style="width: 100%; height: 100%;"></canvas>
        </div>
        <div class="viz-controls">
            <p class="control-label">
                观察 <span style="color:#f97316">红色向量 $\mathbf{i}$</span> 和 <span style="color:#10b981">绿色向量
                    $\mathbf{j}$</span> 的位置。
                这里提供了一些经典的线性变换供你体验：
            </p>

            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center; margin-bottom: 1.5rem;">
                <button class="btn btn-secondary" id="btn-rotate">旋转 45° (Rotation)</button>
                <button class="btn btn-secondary" id="btn-shear">剪切 (Shear)</button>
                <button class="btn btn-secondary" id="btn-scale">非均匀缩放 (Scaling)</button>
                <button class="btn btn-primary" id="btn-identity">还原 (Reset)</button>
            </div>

            <div style="display: flex; gap: 2rem; align-items: center; justify-content: center;">
                <div class="matrix-input">
                    <div class="matrix-grid" style="grid-template-columns: 1fr 1fr;">
                        <input type="number" class="matrix-cell" id="m00" value="1" step="0.1">
                        <input type="number" class="matrix-cell" id="m01" value="0" step="0.1">
                        <input type="number" class="matrix-cell" id="m10" value="0" step="0.1">
                        <input type="number" class="matrix-cell" id="m11" value="1" step="0.1">
                    </div>
                </div>
                <div style="font-size: 2rem; color: var(--text-muted);">&times;</div>
                <div class="math-block" style="margin: 0; padding: 0.5rem 1rem;">
                    $$ \begin{bmatrix} x \\ y \end{bmatrix} $$
                </div>
            </div>
            <p style="text-align: center; margin-top: 1rem; color: var(--text-muted); font-size: 0.9rem;">
                你可以手动修改矩阵数值。试试把第一列改成 $[2, 0]^T$，看看发生了什么？
            </p>
        </div>
    </div>
</div>

<div class="section fade-in">
    <h2 class="section-title">2.2 矩阵乘法的几何意义 <small
            style="font-weight: normal; color: var(--text-muted); font-size: 0.8em;">Matrix Multiplication as
            Composition</small></h2>

    <div class="content-block">
        <p>
            许多初学者觉得矩阵乘法的计算规则很奇怪（行乘列）。为什么不是对应的元素相乘呢？
        </p>
        <p>
            一旦你接受了"矩阵是变换"的观点，矩阵乘法的定义就变得自然而然了：<strong>矩阵乘法对应复合变换 (Composition of Transformations)</strong>。
        </p>
        <p>
            计算 $C = AB$ 意味着：先应用变换 $B$，再应用变换 $A$。
            $$ \mathbf{x} \xrightarrow{B} B\mathbf{x} \xrightarrow{A} A(B\mathbf{x}) $$
        </p>
        <p>
            这也是为什么矩阵乘法通常<strong>不满足交换律 (Non-commutative)</strong>。即 $AB \neq BA$。
            想一想：先"向右平移"再"旋转90度"，和先"旋转90度"再"向右平移"，结果是一样的吗？
        </p>
    </div>
</div>

<div class="section fade-in">
    <h2 class="section-title">2.3 常用词汇表 <small
            style="font-weight: normal; color: var(--text-muted); font-size: 0.8em;">Vocabulary</small></h2>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div class="definition-card" style="margin:0">
            <strong style="color: var(--accent-blue)">中文术语</strong>
            <ul style="list-style: none; padding: 0; margin-top: 0.5rem; color: var(--text-secondary);">
                <li>线性变换</li>
                <li>基向量</li>
                <li>单位矩阵</li>
                <li>旋转矩阵</li>
                <li>剪切</li>
            </ul>
        </div>
        <div class="definition-card" style="margin:0">
            <strong style="color: var(--accent-purple)">English Terms</strong>
            <ul style="list-style: none; padding: 0; margin-top: 0.5rem; color: var(--text-secondary);">
                <li>Linear Transformation</li>
                <li>Basis Vectors</li>
                <li>Identity Matrix</li>
                <li>Rotation Matrix</li>
                <li>Shear</li>
            </ul>
        </div>
    </div>
</div>