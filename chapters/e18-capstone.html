<div class="chapter-header fade-in">
    <span class="chapter-badge">第 18 章（终章）</span>
    <h1 class="chapter-title">综合实战：解决真实世界问题 <br><small style="font-size: 0.6em; color: var(--text-muted);">Capstone:
            Real-World Problem Solving</small></h1>
    <p class="chapter-intro">
        现在，你已经掌握了线性代数的全部核心工具。这一章将把所有知识串联起来，<br>
        展示如何<strong>从零开始分析和解决真实的复杂问题</strong>。
    </p>

    <div class="vocab-summary">
        <div class="vocab-title">本章你将学会</div>
        <div class="vocab-list">
            <div class="vocab-item"><span class="vocab-zh">问题分解</span><span class="vocab-en">Problem
                    Decomposition</span></div>
            <div class="vocab-item"><span class="vocab-zh">知识选择</span><span class="vocab-en">Tool Selection</span></div>
            <div class="vocab-item"><span class="vocab-zh">方案验证</span><span class="vocab-en">Solution
                    Verification</span></div>
        </div>
    </div>
</div>

<!-- ==================== 问题解决框架 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🧭 18.1 问题解决框架</h2>

    <div class="content-block">
        <p>
            面对一个真实问题时，使用这个<strong>四步框架</strong>：
        </p>

        <div class="example-ladder">
            <div class="example-step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-label">🎯 理解问题</div>
                    <p>问题的输入是什么？期望的输出是什么？有什么约束条件？</p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-label">📐 数学建模</div>
                    <p>把问题翻译成线性代数的语言：向量、矩阵、方程组...</p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-label">🔧 选择工具</div>
                    <p>根据问题类型，选择合适的工具：逆矩阵？特征值？行列式？</p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <div class="step-label">✅ 求解验证</div>
                    <p>计算答案，并<strong>验证</strong>是否合理。</p>
                </div>
            </div>
        </div>

        <div class="theorem-card" style="margin-top: 2rem;">
            <div class="theorem-title">📚 知识地图：什么问题用什么工具？</div>
            <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                <thead>
                    <tr style="background: rgba(74, 158, 255, 0.1); text-align: left;">
                        <th style="padding: 0.8rem; border-bottom: 2px solid var(--accent-blue);">问题类型</th>
                        <th style="padding: 0.8rem; border-bottom: 2px solid var(--accent-blue);">核心工具</th>
                        <th style="padding: 0.8rem; border-bottom: 2px solid var(--accent-blue);">相关章节</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">解方程组 $A\vec{x} = \vec{b}$</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">逆矩阵、高斯消元</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">Ch7, Ch12</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">判断是否有唯一解</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">行列式 (det ≠ 0?)</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">Ch6</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">变换/旋转/缩放</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">矩阵乘法</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">Ch3, Ch4, Ch5</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">计算面积/体积</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">行列式、叉积</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">Ch6, Ch10, Ch11</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">判断相似性/夹角</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">点积</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">Ch9</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">分析长期/稳态行为</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">特征值/特征向量</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">Ch14</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">降维/投影</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">非方阵、点积投影</td>
                        <td style="padding: 0.6rem; border-bottom: 1px solid #333;">Ch8, Ch9</td>
                    </tr>
                    <tr>
                        <td style="padding: 0.6rem;">坐标系转换</td>
                        <td style="padding: 0.6rem;">基变换</td>
                        <td style="padding: 0.6rem;">Ch13</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- ==================== 综合案例1：游戏角色路径规划 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🎮 案例 1：游戏 NPC 智能巡逻（多概念融合）</h2>

    <div class="content-block">
        <div
            style="background: linear-gradient(135deg, rgba(74, 158, 255, 0.1), rgba(16, 185, 129, 0.1)); padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem;">
            <h3 style="margin: 0 0 1rem 0;">📋 问题描述</h3>
            <p>
                在一个 2D 游戏中，NPC 守卫需要在三个检查点之间巡逻：<br>
                A$(0, 0)$、B$(4, 0)$、C$(2, 3)$
            </p>
            <p style="margin-top: 1rem;"><strong>需要解决的问题：</strong></p>
            <ol>
                <li>NPC 从 A 沿直线走到 B 需要多久？（速度 2 单位/秒）</li>
                <li>三个检查点围成的巡逻区域面积是多少？</li>
                <li>NPC 在 B 点时，C 在它的左前方还是右前方？</li>
                <li>如果地图发生 45° 旋转，新的检查点坐标是什么？</li>
            </ol>
        </div>

        <!-- 子问题1 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-blue); margin-bottom: 2rem;">
            <div class="deep-title">🔹 子问题 1：A 到 B 的行走时间</div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">建模</div>
                    <div class="step-content">
                        <div class="step-label">用向量表示位移</div>
                        <p>位移向量 $\vec{AB} = B - A = (4, 0) - (0, 0) = (4, 0)$</p>
                        <p style="font-size: 0.9em; color: var(--text-muted);">→ 涉及 <strong>Ch1: 向量</strong></p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">工具</div>
                    <div class="step-content">
                        <div class="step-label">向量的模（长度）</div>
                        <div class="math-block">
                            $|\vec{AB}| = \sqrt{4^2 + 0^2} = 4$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>时间 = 距离 ÷ 速度 = $4 ÷ 2 = \mathbf{2}$ 秒</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 子问题2 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-orange); margin-bottom: 2rem;">
            <div class="deep-title">🔹 子问题 2：巡逻区域面积</div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">建模</div>
                    <div class="step-content">
                        <div class="step-label">三角形面积 → 行列式</div>
                        <p>边向量：$\vec{AB} = (4, 0)$，$\vec{AC} = (2, 3)$</p>
                        <p style="font-size: 0.9em; color: var(--text-muted);">→ 涉及 <strong>Ch6: 行列式</strong></p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">工具</div>
                    <div class="step-content">
                        <div class="step-label">面积 = |行列式| ÷ 2</div>
                        <div class="math-block">
                            $\text{面积} = \frac{1}{2}\left|\det\begin{bmatrix}4 & 2\\0 & 3\end{bmatrix}\right| =
                            \frac{1}{2}|12 - 0| = 6$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>巡逻区域面积 = <strong>6 平方单位</strong></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 子问题3 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-purple); margin-bottom: 2rem;">
            <div class="deep-title">🔹 子问题 3：C 在 B 的左前方还是右前方？</div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">建模</div>
                    <div class="step-content">
                        <div class="step-label">用叉积判断左右</div>
                        <p>NPC 在 B，面朝前方（从 A 来的方向相反）= 朝向 $(1, 0)$</p>
                        <p>目标方向 $\vec{BC} = C - B = (2-4, 3-0) = (-2, 3)$</p>
                        <p style="font-size: 0.9em; color: var(--text-muted);">→ 涉及 <strong>Ch10: 叉积</strong></p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">工具</div>
                    <div class="step-content">
                        <div class="step-label">2D 叉积的符号判断左右</div>
                        <div class="math-block">
                            $\vec{forward} \times \vec{BC} = (1)(3) - (0)(-2) = 3 > 0$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>叉积 > 0 → C 在 NPC 的<strong>左前方</strong>！</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 子问题4 -->
        <div class="deep-dive" style="border-left: 4px solid #ec4899; margin-bottom: 2rem;">
            <div class="deep-title">🔹 子问题 4：地图旋转 45° 后的新坐标</div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">建模</div>
                    <div class="step-content">
                        <div class="step-label">旋转 = 线性变换</div>
                        <p style="font-size: 0.9em; color: var(--text-muted);">→ 涉及 <strong>Ch3:
                                线性变换</strong>，<strong>Ch4: 矩阵乘法</strong></p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">工具</div>
                    <div class="step-content">
                        <div class="step-label">构造旋转矩阵</div>
                        <div class="math-block">
                            $R_{45°} = \begin{bmatrix}\cos 45° & -\sin 45°\\\sin 45° & \cos 45°\end{bmatrix} =
                            \begin{bmatrix}\frac{\sqrt{2}}{2} & -\frac{\sqrt{2}}{2}\\\frac{\sqrt{2}}{2} &
                            \frac{\sqrt{2}}{2}\end{bmatrix}$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">计算</div>
                    <div class="step-content">
                        <div class="step-label">对每个点应用变换</div>
                        <p>A$(0,0)$ → $(0, 0)$（原点不动）</p>
                        <p>B$(4,0)$ → $(4 \cdot \frac{\sqrt{2}}{2}, 4 \cdot \frac{\sqrt{2}}{2}) = (2\sqrt{2}, 2\sqrt{2})
                            ≈ (2.83, 2.83)$</p>
                        <p>C$(2,3)$：需要详细计算...</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>A' = $(0, 0)$，B' ≈ $(2.83, 2.83)$，C' ≈ $(-0.71, 3.54)$</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="aha-box">
            <div class="aha-title">💡 案例总结：用到的知识点</div>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
                <span
                    style="background: var(--accent-blue); color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9em;">Ch1
                    向量</span>
                <span
                    style="background: var(--accent-orange); color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9em;">Ch3
                    线性变换</span>
                <span
                    style="background: var(--accent-purple); color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9em;">Ch6
                    行列式</span>
                <span
                    style="background: #ec4899; color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9em;">Ch10
                    叉积</span>
            </div>
        </div>
    </div>
</div>

<!-- ==================== 综合案例2：网站用户分析 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">📊 案例 2：用户行为分析（特征值应用）</h2>

    <div class="content-block">
        <div
            style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1)); padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem;">
            <h3 style="margin: 0 0 1rem 0;">📋 问题描述</h3>
            <p>
                一个网站有三个页面：首页(H)、产品页(P)、购买页(B)。<br>
                用户在页面之间的跳转概率如下：
            </p>
            <ul>
                <li>从 H：70% 留在 H，20% 去 P，10% 去 B</li>
                <li>从 P：30% 回 H，40% 留在 P，30% 去 B</li>
                <li>从 B：10% 回 H，20% 回 P，70% 留在 B</li>
            </ul>
            <p style="margin-top: 1rem;"><strong>问题：</strong>长期来看，用户分布在各页面的比例是多少？</p>
        </div>

        <div class="example-ladder">
            <div class="example-step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-label">🎯 理解问题：这是马尔可夫链！</div>
                    <p>用户在页面之间随机跳转，我们想知道"长期稳定状态"。</p>
                    <p style="font-size: 0.9em; color: var(--text-muted);">→ 关键词："长期"、"稳定状态" → <strong>特征值问题！</strong>
                    </p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-label">📐 数学建模：构造转移矩阵</div>
                    <div class="math-block">
                        $M = \begin{bmatrix}0.7 & 0.3 & 0.1\\0.2 & 0.4 & 0.2\\0.1 & 0.3 & 0.7\end{bmatrix}$
                    </div>
                    <p style="font-size: 0.9em;">（列是"从哪来"，行是"去哪里"）</p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-label">🔧 选择工具：求 λ=1 的特征向量</div>
                    <p>稳态分布 $\vec{v}$ 满足：$M\vec{v} = \vec{v}$，即 $\vec{v}$ 是 $\lambda = 1$ 的特征向量。</p>
                    <p style="font-size: 0.9em; color: var(--text-muted);">→ 涉及 <strong>Ch14: 特征向量</strong>，<strong>Ch7:
                            解方程组</strong></p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <div class="step-label">✍️ 求解：解 $(M - I)\vec{v} = 0$</div>
                    <div class="math-block">
                        $(M - I) = \begin{bmatrix}-0.3 & 0.3 & 0.1\\0.2 & -0.6 & 0.2\\0.1 & 0.3 & -0.3\end{bmatrix}$
                    </div>
                    <p>解这个齐次方程组（用高斯消元或代入法）...</p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">✓</div>
                <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                    <div class="step-label" style="color: var(--accent-green);">答案</div>
                    <p>归一化后的稳态分布约为：</p>
                    <ul>
                        <li>首页(H)：<strong>35%</strong></li>
                        <li>产品页(P)：<strong>30%</strong></li>
                        <li>购买页(B)：<strong>35%</strong></li>
                    </ul>
                    <p style="margin-top: 0.5rem; font-size: 0.9em; color: var(--text-muted);">
                        💡 <strong>业务洞察</strong>：购买页留存率高（70%），说明用户一旦到达购买页就倾向于停留！
                    </p>
                </div>
            </div>
        </div>

        <div class="aha-box" style="margin-top: 2rem;">
            <div class="aha-title">💡 案例总结：用到的知识点</div>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
                <span
                    style="background: var(--accent-blue); color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9em;">Ch7
                    逆矩阵/解方程</span>
                <span
                    style="background: var(--accent-purple); color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9em;">Ch14
                    特征值</span>
            </div>
        </div>
    </div>
</div>

<!-- ==================== 综合案例3：图像处理 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🖼️ 案例 3：图像滤镜与恢复</h2>

    <div class="content-block">
        <div
            style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(74, 158, 255, 0.1)); padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem;">
            <h3 style="margin: 0 0 1rem 0;">📋 问题描述</h3>
            <p>
                你对一张图片应用了一个"模糊 + 色调偏移"滤镜，变换矩阵是：
            </p>
            <div class="math-block">
                $F = \begin{bmatrix}0.8 & 0.2 & 0\\0.1 & 0.7 & 0.2\\0.1 & 0.1 & 0.8\end{bmatrix}$
            </div>
            <p style="margin-top: 1rem;"><strong>问题：</strong></p>
            <ol>
                <li>这个滤镜可逆吗？（能恢复原图吗？）</li>
                <li>如果可逆，恢复矩阵是什么？</li>
                <li>如果像素 RGB = $(200, 100, 150)$ 变成了 $(180, 125, 145)$，验证计算是否正确。</li>
            </ol>
        </div>

        <!-- 子问题1 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-blue); margin-bottom: 2rem;">
            <div class="deep-title">🔹 子问题 1：滤镜可逆吗？</div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">工具</div>
                    <div class="step-content">
                        <div class="step-label">判断可逆性 → 计算行列式</div>
                        <p style="font-size: 0.9em; color: var(--text-muted);">→ 涉及 <strong>Ch6: 行列式</strong></p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">计算</div>
                    <div class="step-content">
                        <div class="step-label">展开 3×3 行列式</div>
                        <div class="math-block">
                            $\det(F) = 0.8(0.7 \times 0.8 - 0.2 \times 0.1) - 0.2(0.1 \times 0.8 - 0.2 \times 0.1) +
                            0(...)$
                        </div>
                        <p>= $0.8(0.56 - 0.02) - 0.2(0.08 - 0.02) = 0.8 \times 0.54 - 0.2 \times 0.06$</p>
                        <p>= $0.432 - 0.012 = 0.42$</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>$\det(F) = 0.42 \neq 0$ → <strong>可逆！</strong>原图可以恢复。</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 子问题2 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-orange); margin-bottom: 2rem;">
            <div class="deep-title">🔹 子问题 2：恢复矩阵</div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">工具</div>
                    <div class="step-content">
                        <div class="step-label">恢复矩阵 = 逆矩阵 $F^{-1}$</div>
                        <p style="font-size: 0.9em; color: var(--text-muted);">→ 涉及 <strong>Ch7: 逆矩阵</strong></p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">计算</div>
                    <div class="step-content">
                        <div class="step-label">使用伴随矩阵法或数值方法</div>
                        <p>$F^{-1} = \frac{1}{\det(F)} \cdot \text{adj}(F)$</p>
                        <p style="font-size: 0.9em; color: var(--text-muted);">（对于 3×3 矩阵，手算比较繁琐，实际工作中用计算机）</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案（数值解）</div>
                        <div class="math-block">
                            $F^{-1} \approx \begin{bmatrix}1.31 & -0.38 & 0.10\\-0.14 & 1.52 & -0.38\\-0.05 & -0.14 &
                            1.31\end{bmatrix}$
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="aha-box">
            <div class="aha-title">💡 案例总结：用到的知识点</div>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem;">
                <span
                    style="background: var(--accent-blue); color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9em;">Ch6
                    行列式</span>
                <span
                    style="background: var(--accent-orange); color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9em;">Ch7
                    逆矩阵</span>
                <span
                    style="background: var(--accent-purple); color: white; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.9em;">Ch3
                    线性变换</span>
            </div>
        </div>
    </div>
</div>

<!-- ==================== 挑战练习 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🚀 综合挑战</h2>

    <div class="content-block">
        <div class="challenge-box">
            <div class="challenge-title">🎯 挑战 1：机器人手臂</div>
            <p>
                一个机器人有两个关节，每个都可以旋转。第一个关节旋转 θ₁=30°，第二个旋转 θ₂=45°。
                手臂初始指向 $(1, 0)$。
            </p>
            <p><strong>问题</strong>：最终指向哪里？（提示：两个旋转矩阵相乘）</p>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看解题思路</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p><strong>涉及知识</strong>：Ch3（变换）、Ch4（矩阵乘法）</p>
                    <p>步骤：构造 $R_{30}$ 和 $R_{45}$，计算 $R_{45} \cdot R_{30} \cdot (1, 0)^T$</p>
                    <p>总旋转角度 = 30° + 45° = 75°，最终指向 $(\cos 75°, \sin 75°) ≈ (0.26, 0.97)$</p>
                </div>
            </details>
        </div>

        <div class="challenge-box" style="margin-top: 1.5rem;">
            <div class="challenge-title">🎯 挑战 2：经济模型</div>
            <p>
                两个城市的人口迁移：每年 10% 的 A 市人口搬到 B 市，5% 的 B 市人口搬到 A 市。
                初始 A 市 100 万人，B 市 200 万人。
            </p>
            <p><strong>问题</strong>：10 年后各市人口多少？长期稳定后呢？</p>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看解题思路</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p><strong>涉及知识</strong>：Ch4（矩阵幂）、Ch14（特征值）</p>
                    <p>转移矩阵 $M = \begin{bmatrix}0.9 & 0.05\\0.1 & 0.95\end{bmatrix}$</p>
                    <p>10 年后：计算 $M^{10} \cdot (100, 200)^T$</p>
                    <p>长期稳定：求 $\lambda = 1$ 的特征向量</p>
                </div>
            </details>
        </div>

        <div class="challenge-box" style="margin-top: 1.5rem;">
            <div class="challenge-title">🎯 挑战 3：三角形包含点？</div>
            <p>
                三角形顶点：A$(0,0)$, B$(4,0)$, C$(2,3)$。判断点 P$(2, 1)$ 是否在三角形内部。
            </p>
            <p><strong>问题</strong>：用线性代数方法判断。</p>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看解题思路</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p><strong>涉及知识</strong>：Ch2（线性组合）、Ch10（叉积）</p>
                    <p>方法1：判断 P 是否可以写成 $P = A + s \cdot \vec{AB} + t \cdot \vec{AC}$，其中 $s, t \geq 0$ 且 $s + t \leq 1$
                    </p>
                    <p>方法2：用叉积判断 P 是否在三条边的同一侧</p>
                </div>
            </details>
        </div>
    </div>
</div>

<!-- 总结 -->
<div class="section fade-in">
    <h2 class="section-title">🎯 本章收获</h2>

    <div class="content-block">
        <div class="theorem-card">
            <div class="theorem-title">核心要点</div>
            <ol style="margin: 0; padding-left: 1.5rem; line-height: 2.2;">
                <li><strong>问题分解</strong>：把复杂问题拆成多个子问题</li>
                <li><strong>知识映射</strong>：识别每个子问题对应的线性代数工具</li>
                <li><strong>工具选择</strong>：根据问题规模和特点选择最合适的方法</li>
                <li><strong>验证答案</strong>：用多种方式检验结果的正确性</li>
            </ol>
        </div>

        <div
            style="text-align: center; margin-top: 2rem; padding: 2rem; background: linear-gradient(135deg, rgba(74, 158, 255, 0.1), rgba(16, 185, 129, 0.1)); border-radius: 12px;">
            <p style="font-size: 1.5rem; margin: 0;">🎓</p>
            <p style="font-size: 1.2rem; margin: 1rem 0 0 0;">
                <strong>恭喜！</strong>你现在拥有了完整的线性代数工具箱。<br>
                去解决真实世界的问题吧！
            </p>
        </div>
    </div>
</div>