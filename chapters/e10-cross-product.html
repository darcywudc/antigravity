<div class="chapter-header fade-in">
    <span class="chapter-badge">第 10 章</span>
    <h1 class="chapter-title">叉积：找到垂直方向 <br><small style="font-size: 0.6em; color: var(--text-muted);">Cross
            Products</small></h1>
    <p class="chapter-description">
        给你两个向量，能不能找到一个同时垂直于它们的第三个方向？
        这就是<strong>叉积</strong>的超能力——而且它只在 3D 世界里存在！
    </p>
</div>

<!-- 核心词汇 -->
<div class="section fade-in">
    <div class="vocab-summary">
        <div class="vocab-title">本章核心词汇</div>
        <div class="vocab-list">
            <div class="vocab-item"><span class="vocab-zh">叉积</span><span class="vocab-en">Cross Product</span></div>
            <div class="vocab-item"><span class="vocab-zh">外积</span><span class="vocab-en">Outer Product</span></div>
            <div class="vocab-item"><span class="vocab-zh">法向量</span><span class="vocab-en">Normal Vector</span></div>
            <div class="vocab-item"><span class="vocab-zh">右手定则</span><span class="vocab-en">Right-hand Rule</span>
            </div>
        </div>
    </div>
</div>

<!-- SECTION 1: 点积 vs 叉积 -->
<div class="section fade-in">
    <h2 class="section-title">⚔️ 10.1 点积 vs 叉积</h2>

    <div class="content-block">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0;">
            <div class="definition-card" style="border-left-color: var(--accent-blue);">
                <div class="definition-title">点积 Dot Product</div>
                <ul style="margin: 0;">
                    <li>结果是一个<strong>数字</strong></li>
                    <li>测量"同向程度"</li>
                    <li>在任何维度都有</li>
                </ul>
            </div>
            <div class="definition-card" style="border-left-color: var(--accent-purple);">
                <div class="definition-title">叉积 Cross Product</div>
                <ul style="margin: 0;">
                    <li>结果是一个<strong>向量</strong></li>
                    <li>找"垂直方向"</li>
                    <li><strong>只在 3D 中有意义！</strong></li>
                </ul>
            </div>
        </div>

        <div class="aha-box">
            <div class="aha-title">为什么只有 3D？</div>
            <p>
                在 2D 中，垂直于一个向量的方向有无数个（都在一条线上）。
                但在 3D 中，同时垂直于<strong>两个</strong>不平行的向量，方向就唯一确定了！
                （正负相反算一个方向）
            </p>
        </div>
    </div>
</div>

<!-- Interactive Cross Product Demo -->
<div class="section fade-in">
    <h2 class="section-title">🕹️ 动手体验：3D 叉积可视化</h2>

    <div class="viz-container">
        <div class="viz-header">
            <span class="viz-title">拖拽旋转 3D 视角</span>
            <span class="viz-badge" style="background: var(--accent-purple);">3D</span>
        </div>
        <div class="viz-canvas-wrapper" style="height: 400px;">
            <canvas id="viz-cross-product" style="width: 100%; height: 100%;"></canvas>
        </div>
        <div class="viz-controls">
            <p style="text-align: center; color: var(--text-muted);">
                🔵 <span style="color:#4a9eff">v</span> 和 🟠 <span style="color:#f97316">w</span> 的叉积是 🟢 <span
                    style="color:#10b981">v × w</span>（垂直于两者）<br>
                粉色区域 = 平行四边形面积 = |v × w|
            </p>
        </div>
    </div>
</div>

<!-- SECTION 2: 右手定则 -->
<div class="section fade-in">
    <h2 class="section-title">✋ 10.2 右手定则</h2>

    <div class="content-block">
        <p>叉积 $\vec{v} \times \vec{w}$ 的方向怎么确定？用你的右手！</p>

        <div class="example-ladder">
            <div class="example-step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-label">伸出右手</div>
                    <p>让四根手指指向 $\vec{v}$ 的方向</p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-label">弯曲手指</div>
                    <p>四指从 $\vec{v}$ 弯向 $\vec{w}$（沿较小的角度转）</p>
                </div>
            </div>
            <div class="example-step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-label">大拇指指向</div>
                    <p>大拇指指向的方向，就是 $\vec{v} \times \vec{w}$ 的方向！</p>
                </div>
            </div>
        </div>

        <div class="theorem-card">
            <div class="theorem-title">🔑 右手定则</div>
            <p style="text-align: center;">
                <span class="term" data-en="Right-hand Rule">右手定则</span>：四指从 $\vec{v}$ 转向 $\vec{w}$，
                拇指指向 $\vec{v} \times \vec{w}$
            </p>
        </div>
    </div>
</div>

<!-- SECTION 3: 叉积的长度 -->
<div class="section fade-in">
    <h2 class="section-title">📐 10.3 叉积的长度 = 面积！</h2>

    <div class="content-block">
        <div class="theorem-card">
            <div class="theorem-title">几何意义</div>
            <p style="text-align: center; font-size: 1.1rem;">
                $|\vec{v} \times \vec{w}|$ = 由 $\vec{v}$ 和 $\vec{w}$ 围成的<strong>平行四边形的面积</strong>
            </p>
        </div>

        <div style="display: flex; justify-content: center; margin: 2rem 0;">
            <svg width="220" height="160" viewBox="0 0 220 160">
                <polygon points="30,130 150,130 180,50 60,50" fill="rgba(236, 72, 153, 0.2)" stroke="#ec4899"
                    stroke-width="2" />
                <line x1="30" y1="130" x2="150" y2="130" stroke="#4a9eff" stroke-width="3" />
                <line x1="30" y1="130" x2="60" y2="50" stroke="#f97316" stroke-width="3" />
                <text x="90" y="145" fill="#4a9eff" font-size="14" font-weight="bold">v</text>
                <text x="35" y="85" fill="#f97316" font-size="14" font-weight="bold">w</text>
                <text x="105" y="95" fill="#ec4899" font-size="16" font-weight="bold">面积</text>
            </svg>
        </div>

        <div class="connection-box">
            <div class="connection-title">与行列式的联系</div>
            <p>
                还记得第 6 章吗？2D 行列式 = 平行四边形面积。
                叉积的长度本质上就是一个"3D 版的行列式"！
            </p>
        </div>
    </div>
</div>

<!-- SECTION 4: 顺序重要 -->
<div class="section fade-in">
    <h2 class="section-title">🔄 10.4 顺序影响方向</h2>

    <div class="content-block">
        <div class="theorem-card" style="border-left-color: var(--accent-orange);">
            <div class="theorem-title">⚠️ 反对称性</div>
            <div class="math-block">
                $$ \vec{w} \times \vec{v} = -(\vec{v} \times \vec{w}) $$
            </div>
            <p style="text-align: center;">交换顺序，结果<strong>反向</strong>！</p>
        </div>

        <p style="margin-top: 1rem;">
            这很好理解：用右手定则，把"从 v 转向 w"变成"从 w 转向 v"，
            拇指方向自然就反了。
        </p>
    </div>
</div>

<!-- SECTION 5: 公式 -->
<div class="section fade-in">
    <h2 class="section-title">🧮 10.5 计算公式</h2>

    <div class="content-block">
        <div class="theorem-card">
            <div class="theorem-title">3D 叉积公式</div>
            <div class="math-block">
                $$ \begin{bmatrix} v_1 \\ v_2 \\ v_3 \end{bmatrix} \times \begin{bmatrix} w_1 \\ w_2 \\ w_3
                \end{bmatrix}
                = \begin{bmatrix} v_2 w_3 - v_3 w_2 \\ v_3 w_1 - v_1 w_3 \\ v_1 w_2 - v_2 w_1 \end{bmatrix} $$
            </div>
        </div>

        <div class="deep-dive">
            <div class="deep-title">记忆技巧</div>
            <p>每个分量都是"交叉相减"——这也是"叉积"名字的由来！</p>
            <p style="margin-top: 0.5rem;">
                第一个分量：忽略 x，用 yz 交叉相减<br>
                第二个分量：忽略 y，用 zx 交叉相减（注意顺序）<br>
                第三个分量：忽略 z，用 xy 交叉相减
            </p>
        </div>
    </div>
</div>

<!-- 应用 -->
<div class="section fade-in">
    <h2 class="section-title">🌍 10.6 叉积的应用</h2>

    <div class="real-world">
        <div class="real-world-item">
            <div class="rw-icon">🎮</div>
            <div class="rw-title">3D 游戏</div>
            <div class="rw-desc">计算表面法向量（朝外的方向）</div>
        </div>
        <div class="real-world-item">
            <div class="rw-icon">⚙️</div>
            <div class="rw-title">物理引擎</div>
            <div class="rw-desc">计算力矩（使物体旋转的力）</div>
        </div>
        <div class="real-world-item">
            <div class="rw-icon">🛠️</div>
            <div class="rw-title">3D 建模</div>
            <div class="rw-desc">确定表面的正面和背面</div>
        </div>
        <div class="real-world-item">
            <div class="rw-icon">🧭</div>
            <div class="rw-title">导航</div>
            <div class="rw-desc">确定"左边"和"右边"</div>
        </div>
    </div>

    <!-- 新增：练习题 -->
    <div class="challenge-box" style="margin-top: 2rem;">
        <div class="challenge-title">✍️ 动手练习</div>
        <p><strong>用右手定则判断下列叉积的方向：</strong></p>
        <ol>
            <li>$\hat{i} \times \hat{j} = ?$（x轴叉乘y轴）</li>
            <li>$\hat{j} \times \hat{i} = ?$（y轴叉乘x轴）</li>
        </ol>
        <details style="margin-top: 1rem;">
            <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看答案</summary>
            <div style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                <ol>
                    <li>$\hat{i} \times \hat{j} = \mathbf{\hat{k}}$（指向 z 轴正方向，朝上）</li>
                    <li>$\hat{j} \times \hat{i} = \mathbf{-\hat{k}}$（指向 z 轴负方向，朝下）——顺序反了，结果反向！</li>
                </ol>
            </div>
        </details>
    </div>

    <!-- 新增：思考题 -->
    <div class="challenge-box" style="margin-top: 2rem;">
        <div class="challenge-title">🤔 想一想</div>
        <p><strong>$\vec{v} \times \vec{v}$ 等于多少？为什么？</strong></p>
        <details style="margin-top: 1rem;">
            <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看答案</summary>
            <div style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                <p><strong>答案</strong>：$\vec{0}$（零向量）</p>
                <p style="margin-top: 0.5rem;">
                    自己和自己叉乘，平行四边形"退化"成一条线，面积为 0！<br>
                    另一个理解：没有"垂直于自己"的唯一方向。
                </p>
            </div>
        </details>
    </div>

    <!-- 新增：常见误区 -->
    <div class="definition-card" style="border-left-color: var(--accent-orange); margin-top: 2rem;">
        <div class="definition-title" style="color: var(--accent-orange);">⚠️ 常见误区</div>
        <p><strong>误区</strong>："叉积在所有维度都有"</p>
        <p><strong>纠正</strong>：叉积只在 <strong>3D</strong> 中有意义！在 2D 中没有"垂直平面"的向量，在 4D+ 中定义更复杂。</p>
    </div>
</div>

<!-- ==================== 实战应用 ==================== -->
<div class="section fade-in">
    <h2 class="section-title">🎯 实战应用：用叉积解决真实问题</h2>

    <div class="content-block">
        <p style="font-size: 1.1rem; margin-bottom: 2rem;">
            叉积是3D图形和物理模拟的核心工具——计算法线、判断方向、模拟力矩，都离不开它。
        </p>

        <!-- 问题 1：计算平面法线 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-blue); margin-bottom: 2rem;">
            <div class="deep-title">💡 问题 1：计算三角形的法线向量</div>

            <div style="background: rgba(74, 158, 255, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>场景</strong>：在3D建模中，需要计算一个三角形面的"法线"（垂直于表面的向量），用于光照计算。</p>
                <p>三角形顶点：A$(0,0,0)$、B$(1,0,0)$、C$(0,1,0)$</p>
            </div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">构建边向量</div>
                        <p>$\vec{AB} = (1, 0, 0)$，$\vec{AC} = (0, 1, 0)$</p>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-label">叉积得到法线</div>
                        <div class="math-block">
                            $\vec{n} = \vec{AB} \times \vec{AC} = \begin{vmatrix}\hat{i} & \hat{j} & \hat{k}\\1 & 0 &
                            0\\0 & 1 & 0\end{vmatrix} = (0, 0, 1)$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>法线向量是 <strong>$(0, 0, 1)$</strong>，指向 Z 轴正方向（朝上）。</p>
                        <p style="font-size: 0.9em; color: var(--text-muted);">这个三角形在 XY 平面上，法线当然垂直于这个平面！</p>
                    </div>
                </div>
            </div>

            <div class="aha-box" style="margin-top: 1rem;">
                <div class="aha-title">💡 这就是"表面法线"</div>
                <p>游戏里的光照效果（光滑表面、磨砂表面）都靠法线向量计算。Blender 里的"重新计算法线"功能就是批量做这个！</p>
            </div>
        </div>

        <!-- 问题 2：判断转向方向 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-orange); margin-bottom: 2rem;">
            <div class="deep-title">🚗 问题 2：汽车应该左转还是右转？</div>

            <div style="background: rgba(249, 115, 22, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>场景</strong>：自动驾驶需要判断从当前方向 $\vec{v} = (1, 0, 0)$ 到目标方向 $\vec{t} = (1, 1, 0)$，应该左转还是右转？</p>
            </div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">计算叉积</div>
                        <div class="math-block">
                            $\vec{v} \times \vec{t} = (1, 0, 0) \times (1, 1, 0) = (0, 0, 1)$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>结果 Z 分量 > 0 → <strong>左转！</strong></p>
                        <p style="font-size: 0.9em; color: var(--text-muted);">如果 Z < 0，则右转；如果 Z=0，方向相同或相反。</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 问题 3：物理力矩 -->
        <div class="deep-dive" style="border-left: 4px solid var(--accent-purple);">
            <div class="deep-title">🔧 问题 3：扳手的力矩有多大？</div>

            <div style="background: rgba(139, 92, 246, 0.05); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <p><strong>场景</strong>：你用扳手拧螺丝。扳手长度 $\vec{r} = (0.3, 0, 0)$ 米，你施加的力 $\vec{F} = (0, 50, 0)$ 牛顿（垂直向下）。</p>
                <p><strong>问题</strong>：产生的力矩是多少？</p>
            </div>

            <div class="example-ladder">
                <div class="example-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-label">力矩 = 位置 × 力（叉积）</div>
                        <div class="math-block">
                            $\vec{\tau} = \vec{r} \times \vec{F} = (0.3, 0, 0) \times (0, 50, 0)$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-label">计算叉积</div>
                        <div class="math-block">
                            $\vec{\tau} = (0 \cdot 0 - 0 \cdot 50, 0 \cdot 0 - 0.3 \cdot 0, 0.3 \cdot 50 - 0 \cdot 0) =
                            (0, 0, 15)$
                        </div>
                    </div>
                </div>
                <div class="example-step">
                    <div class="step-number">✓</div>
                    <div class="step-content" style="background: rgba(16, 185, 129, 0.1);">
                        <div class="step-label" style="color: var(--accent-green);">答案</div>
                        <p>力矩是 <strong>15 牛顿·米</strong>，方向沿 Z 轴（使螺丝逆时针旋转）。</p>
                    </div>
                </div>
            </div>

            <div class="aha-box" style="margin-top: 1rem;">
                <div class="aha-title">💡 为什么扳手越长越省力？</div>
                <p>力矩 = $|\vec{r}| \times |\vec{F}| \times \sin\theta$。扳手越长，$|\vec{r}|$ 越大，产生的力矩就越大！</p>
            </div>
        </div>

        <!-- 挑战题 -->
        <div class="challenge-box" style="margin-top: 2rem;">
            <div class="challenge-title">🚀 挑战：平行四边形面积</div>
            <p><strong>问题</strong>：向量 $\vec{a} = (3, 0, 0)$ 和 $\vec{b} = (0, 4, 0)$ 围成的平行四边形面积是多少？</p>
            <details style="margin-top: 1rem;">
                <summary style="cursor: pointer; color: var(--accent-blue); font-weight: bold;">👆 点击查看答案</summary>
                <div
                    style="margin-top: 0.5rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p>$\vec{a} \times \vec{b} = (0, 0, 12)$</p>
                    <p>面积 = $|\vec{a} \times \vec{b}| = 12$ 平方单位</p>
                    <p style="font-size: 0.9em; color: var(--text-muted);">这就是一个 3×4 的矩形！</p>
                </div>
            </details>
        </div>

    </div>
</div>

<!-- 总结 -->
<div class="section fade-in">
    <h2 class="section-title">🎯 本章收获</h2>

    <div class="content-block">
        <div class="theorem-card">
            <div class="theorem-title">核心要点</div>
            <ol style="margin: 0; padding-left: 1.5rem; line-height: 2.2;">
                <li><span class="term" data-en="Cross Product">叉积</span>只在 <strong>3D</strong> 中有意义</li>
                <li>结果是<strong>垂直于</strong>两个输入向量的新向量</li>
                <li>方向：用<span class="term" data-en="Right-hand Rule">右手定则</span></li>
                <li>长度 = 平行四边形<strong>面积</strong></li>
                <li>交换顺序 → 结果<strong>反向</strong></li>
            </ol>
        </div>
    </div>
</div>